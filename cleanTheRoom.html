<meta charset="utf-8">
<table id="scores">
  <!-- <tr>
  <td>Row1 cell1</td>
  <td>Row1 cell2</td>
</tr>
<tr>
  <td>Row2 cell1</td>
  <td>Row2 cell2</td>
</tr>
<tr>
  <td>Row3 cell1</td>
  <td>Row3 cell2</td>
</tr> -->
</table>
<div id="trash">
<h1 onmousedown="style.color = 'red'" onmouseout="style.color = 'black';" onmouseup="style.color = 'black'; document.onkeydown({key: 'Delete'});" style="backgroundColor: 'none'; font-size='50px'; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;">üöÆ</h1>
<br>
</div>
<canvas onclick="canvasClicked();" onmousedown="mousedownOnCanvas();" onmouseup="mouseUpOnCanvas();" id="textur" width="1900" height="700"></canvas>
<br>
<div id="settings">
  Staubsauger Gr√∂√üe<input value="50" min="1" max="222" oninput="maxLochHeight.min = JSON.parse(value)*1.5; maxLochWidth.min = JSON.parse(value)*1.5; minLochHeight.min = JSON.parse(value)*1.5; minLochWidth.min = JSON.parse(value)*1.5; minStaubSize.max = JSON.parse(value) - 1; maxStaubSize.max = JSON.parse(value); sphere1.style.width = value; sphere1.style.height = value; " id="staubsaugerSize" type="range">
  <br>
  restart round when hitting wall<input checked="true" type="checkbox" id="brokenCheck">
  <br>
  bounce von W√§nden ab<input type="checkbox" id="bounceWalls">
  <br>
  opposite direction<input id="oppsositeDirection" type="checkbox">
  <br>
  <p id="pPixelRateWidth">pixel rate width <input oninput="if (mode == 'creator') pixelRateChanged({width: value});" id="pixelRateWidth" type="text"> <button type="button" onclick="resetPixelRate(['width']);" name="button">reset</button> </p>
  <br>
  <p id="pPixelRateHeight">pixel rate height <input id="pixelRateHeight" oninput="if (mode == 'creator') pixelRateChanged({height: value});" type="text"> <button type="button" onclick="resetPixelRate(['height']);" name="button">reset</button> </p>
  <br>
  <p id="joyStickPlayP">play with joy-stick<input id="joyStickPlay" type="checkbox"></p>
  <br>
  <div id="spezifischeSettings">
    <font size="5">Staub</font><font onclick="var opposite = {visibility: {'none': 'inline', 'inline': 'none'}, innerHTML: {'‚åÉ': '‚åÑ', '‚åÑ': '‚åÉ'}}; staubDiv.style.display = opposite.visibility[staubDiv.style.display]; innerHTML = opposite.innerHTML[innerHTML];" size="6">‚åÑ</font>
    <div id="staubDiv">
      <br>
      min. <input value="3" id="minStaubSize" oninput="if (JSON.parse(maxStaubSize.value) < JSON.parse(value)) {maxStaubSize.value = JSON.parse(value) + 1}" value="3" min="1" type="range">
      <br>
      max. <input value="24" id="maxStaubSize" oninput="minStaubSize.max = JSON.parse(value) - 1" min="1" value="22" type="range">
      <br>
      <input id="anzahlStaub" value="27" type="text">Staubk√∂rner sollen es insgesamt sein!
    </div>
    <p><input checked="true" onchange="if (checked) {spielzeugDiv.style.display = 'inline'; spielzeugDiv.style.display = 'inline';} else {anzahlSpielzeug.value = 0; spielzeugDiv.style.display = 'none'; spielzeugDiv.style.display = 'none'}" type="checkbox"><font size="5">Spielzeug</font></p>
    <div id="spielzeugDiv">
      <input checked="true" id="stoppeBeiSpielzeug" type="checkbox">stoppe kurz(zum Entfernen)
      <br>
      <input id="langsamerBeiSpielzeug" onchange="if (checked) verlangsamungSpielzeugP.style.display = 'inline'; else verlangsamungSpielzeugP.style.display = 'none';" type="checkbox">werde langsamer
      <p id="verlangsamungSpielzeugP">
        time (in mili sec. (1000 mili sec. ist 1 sec.))<input id="zeitLangsamer"value="endless" onchange="if (isNaN(value)) value = 'endless';" type="text">
        <br>
        slowest speed (1.1 - 1.8 m√∂glich, 1.8 ist direkt nach erstem Treffer, danach pro Spielzeug 0.1)<input id="slowestSpeed" value="1.3" type="text">
        <br>
        <input checked="true" onchange="if (checked) clearWhenSlow.checked = false;" id="restartWhenSlow" type="checkbox">restart when speed gets too low
        <br>
        <input onchange="if (checked) restartWhenSlow.checked = false;" id="clearWhenSlow" type="checkbox" name="" value="">stay still when speed gets too low and continue with normal speed afterfords
        <br>
      </p>
      <br>
      <input type="checkbox" id="spielzeugWenigPlatz" checked="true">Spielzeug kann auch aufgesammelt werden,wenn im Staubsauger eigentlich nicht mer genug Platz ist
      <br>
      <input id="spielzeugPlatz" type="checkbox">Spielzeugt bleibt nicht im Sauger und nimmt somit auch keinen Platz ein
      <br>
      min. <input value="3" id="minSpielzeugSize" oninput="if (JSON.parse(maxSpielzeugSize.value) < JSON.parse(value)) {maxSpielzeugSize.value = JSON.parse(value) + 1}" value="3" min="1" type="range">
      <br>
      max. <input value="24" id="maxSpielzeugSize" oninput="minSpielzeugSize.max = JSON.parse(value) - 1" min="1" value="22" type="range">
      <br>
      <input id="anzahlSpielzeug" value="22" type="text">Spielzeuge sollen es insgesamt sein!
    </div>
    <p><input checked="true" onchange="if (checked) {SchmuckDiv.style.display = 'inline'; SchmuckDiv.style.display = 'inline';} else {anzahlSchmuck.value = 0; SchmuckDiv.style.display = 'none'; SchmuckDiv.style.display = 'none'}" type="checkbox"><font size="5">Schmuck</font></p>
    <div id="SchmuckDiv">
      min. <input value="3" id="minSchmuckSize" oninput="if (JSON.parse(maxSchmuckSize.value) < JSON.parse(value)) {maxSchmuckSize.value = JSON.parse(value) + 1}" value="3" min="1" type="range">
      <br>
      max. <input value="24" id="maxSchmuckSize" oninput="minSchmuckSize.max = JSON.parse(value) - 1" min="1" value="22" type="range">
      <br>
      <input id="anzahlSchmuck" value="3" type="text">Schmuckst√ºcke sollen es insgesamt sein!
    </div>
    <p><input checked="true" onchange="if (checked) TeppichDiv.style.display = 'inline'; else {anzahlTeppich.value = 0; TeppichDiv.style.display = 'none';}" type="checkbox"><font size="5">Teppich</font></p>
    <div id="TeppichDiv">
      min. width <input value="33" min="11" id="minTeppichWidth" oninput="if (JSON.parse(maxTeppichWidth.value) < JSON.parse(value)) {maxTeppichWidth.value = JSON.parse(value) + 1}" type="range">
      <br>
      max. width <input value="411" min="11" oninput="minTeppichWidth.max = JSON.parse(value) - 1" id="maxTeppichWidth" type="range">
      <br>
      min. height <input value="33" min="11" id="minTeppichHeight" oninput="if (JSON.parse(maxTeppichHeight.value) < JSON.parse(value)) {maxTeppichHeight.value = JSON.parse(value) + 1}" type="range">
      <br>
      max. height <input value="411" min="11" oninput="minTeppichHeight.max = JSON.parse(value) - 1" id="maxTeppichHeight" type="range">
      <br>
      Verlangsamung (rechts ist weniger)<input value="11" id="verlangsamungTeppich" min="11" max="19" type="range">
      <br>
      <input id="anzahlTeppich" value="1" type="text">Teppiche sollen es insgesamt sein!
    </div>
    <p><input checked="true" onchange="if (checked) moebelDiv.style.display = 'inline'; else {moebelDiv.style.display = 'none'; anzahlMoebel.value = 0;}" type="checkbox"><font size="5">M√∂bel</font></p>
    <div id="moebelDiv">
      min. width <input value="23" id="minMoebelWidth" oninput="if (JSON.parse(maxMoebelWidth.value) < JSON.parse(value)) {maxMoebelWidth.value = JSON.parse(value) + 1}" type="range">
      <br>
      max. width <input value="155" oninput="minMoebelWidth.max = JSON.parse(value) - 1" id="maxMoebelWidth" type="range">
      <br>
      min. height <input value="23" id="minMoebelHeight" oninput="if (JSON.parse(maxMoebelHeight.value) < JSON.parse(value)) {maxMoebelHeight.value = JSON.parse(value) + 1}" type="range">
      <br>
      max. height <input value="155" oninput="minMoebelHeight.max = JSON.parse(value) - 1" id="maxMoebelHeight" type="range">
      <input id="anzahlMoebel" value="4" type="text">M√∂bel sollen es insgesamt sein!
    </div>
    <p><input checked="true" onchange="if (checked) LochDiv.style.display = 'inline'; else {LochDiv.style.display = 'none'; anzahlLoecher.value = 0;}" type="checkbox"><font size="5">Loch</font></p>
    <div id="LochDiv">
      min. width <input value="51" id="minLochWidth" oninput="if (JSON.parse(maxLochWidth.value) < JSON.parse(value)) {maxLochWidth.value = JSON.parse(value) + 1}" type="range">
      <br>
      max. width <input value="133" oninput="minLochWidth.max = JSON.parse(value) - 1" id="maxLochWidth" type="range">
      <br>
      min. height <input value="51" id="minLochHeight" oninput="if (JSON.parse(maxLochHeight.value) < JSON.parse(value)) {maxLochHeight.value = JSON.parse(value) + 1}" type="range">
      <br>
      max. height <input oninput="minLochHeight.max = JSON.parse(value) - 1" id="maxLochHeight" type="range">
      <br>
      <input id="anzahlLoecher" value="2" type="text">L√∂cher sollen es insgesamt sein!
    </div>
    <p><input id="ladestationVorhanden" checked="true" onchange="if (checked) ladestationDiv.style.display = 'inline'; else {anzahlLadestationen.value = 0; ladestationDiv.style.display = 'none';}" type="checkbox"><font size="5">Ladestation</font></p>
    <div id="ladestationDiv">
      <input id="pixelBisLadenCheck" onchange="if (checked) StaubAlsLadeBasisCheck.checked = false;" type="checkbox"> nach <input type="text" id="pixelBisLadenT" placeholder="anzahl" value="3333"> Pixeln Akku leer
      <br>
      <input onchange="if (checked) pixelBisLadenCheck.checked = false;" id="StaubAlsLadeBasisCheck" checked="true" type="checkbox"> nach <input id="staubAlsLadeBasisT" type="text" placeholder="anzahl" value="5.5"> mal so vielen Pixeln, wie aller Staub zusammen Akku leer
      <br>
      min. width <input value="33" id="minLaderWidth" oninput="if (JSON.parse(maxLaderWidth.value) < JSON.parse(value)) {maxLaderWidth.value = JSON.parse(value) + 1}" type="range">
      <br>
      max. width <input value="100" oninput="minLaderWidth.max = JSON.parse(value) - 1" id="maxLaderWidth" type="range">
      <br>
      min. height <input value="33" id="minLaderHeight" oninput="if (JSON.parse(maxLaderHeight.value) < JSON.parse(value)) {maxLaderHeight.value = JSON.parse(value) + 1}" type="range">
      <br>
      max. height <input value="100" oninput="minLaderHeight.max = JSON.parse(value) - 1" id="maxLaderHeight" type="range">
      <br>
      <input id="anzahlLadestationen" value="1" type="text">Ladestationen sollen es insgesamt sein!
      <br>
      <input id="showWayLadestation" type="checkbox">Weg dahin kennzeichnen
    </div>
    <p><input checked="true" id="entleererVorhanden" onchange="if (checked) {entleererDiv.style.display = 'inline';} else {anzahlEntleerer.value = 0; entleererDiv.style.display = 'none';}" type="checkbox"><font size="5">Entleerer (Staub beh√§lter entleeren, um neuen aufsammeln zu k√∂nnen)</font></p>
    <div id="entleererDiv">
      <input id="pixelBisLeerenCheck" onchange="if (checked) StaubAlsLeerBasisCheck.checked = false;" type="checkbox"> nach <input  id="pixelBisLeerenT" type="text" placeholder="anzahl" value="500"> Pixeln keinen Staub mehr aufnehmen
      <br>
      <input onchange="if (checked) pixelBisLeerenCheck.checked = false;" id="StaubAlsLeerBasisCheck" checked="true" type="checkbox"> nach pixel Anzahl des gesamten Staubes geteilt durch<input id="StaubAlsLeerBasisT" type="text" placeholder="anzahl" value="2"> keinen Staub mehr aufnehmen
      <br>
      min. width <input value="33" id="minLeererWidth" oninput="if (JSON.parse(maxLeererWidth.value) < JSON.parse(value)) {maxLeererWidth.value = JSON.parse(value) + 1}" type="range">
      <br>
      max. width <input value="100" oninput="minLeererWidth.max = JSON.parse(value) - 1" id="maxLeererWidth" type="range">
      <br>
      min. height <input value="33" id="minLeererHeight" oninput="if (JSON.parse(maxLeererHeight.value) < JSON.parse(value)) {maxLeererHeight.value = JSON.parse(value) + 1}" type="range">
      <br>
      max. height <input value="100" oninput="minLeererHeight.max = JSON.parse(value) - 1" id="maxLeererHeight" type="range">
      <br>
      <input id="anzahlEntleerer" value="1" type="text">Entleerer sollen es insgesamt sein!
      <br>
      <input id="showWayEntleerer" type="checkbox">Weg dahin kennzeichnen
    </div>
    <button type="button" onclick="createNewPixelRate(true);" id="createButton" name="button">create</button>
  </div>
</div>
<div id="creationDiv">
  <button type="button" onclick='document.onkeydown({key: "z", ctrlKey: true})'' name="button"> <-- </button>
  <button type="button" onclick="elementSelected(id);" id="staub" name="button">Staub</button>
  <button type="button" onclick="elementSelected(id);" id="schmuck" name="button">Schmuck</button>
  <button type="button" onclick="elementSelected(id);" id="spielzeug" name="button">Spielzeug</button>
  <button type="button" onclick="elementSelected(id);" id="teppich" name="button">Teppich</button>
  <button type="button" onclick="elementSelected(id);" id="moebel" name="button">M√∂bel</button>
  <button type="L√∂cher" onclick="elementSelected(id);" id="vertiefung" name="button">Loch</button>
  <button type="button" onclick="elementSelected(id);" id="ladestation" name="button">Ladestation</button>
  <button type="button" onclick="elementSelected(id);" id="leererStation" name="button">Entleerer</button>
  <button type="button" onclick="elementSelected(id);" id="multiSelector" name="button">multi selector</button>
  <button type="button" onclick='document.onkeydown({key: "y", ctrlKey: true})' name="button"> --> </button>
  <br>
  <button type="button" id="tryLevel" onclick="tryLevel();" name="button">try out your level (clear it to be able to upload it)</button>
  <h3>Spielzeug</h3>
  <input checked="true" id="stoppeBeiSpielzeugEdit" type="checkbox">stoppe kurz(zum Entfernen)
  <br>
  <input id="langsamerBeiSpielzeugEdit" onchange="if (checked) verlangsamungSpielzeugPEdit.style.display = 'inline'; else verlangsamungSpielzeugPEdit.style.display = 'none';" type="checkbox">werde langsamer
  <p id="verlangsamungSpielzeugPEdit">
    time<input id="zeitLangsamerEdit"value="endless" onchange="if (isNaN(value)) value = 'endless';" type="text">
    slowest speed (1.1 - 1.8 m√∂glich, 1.8 ist direkt nach erstem Treffer, danach pro Spielzeug 0.1)<input id="slowestSpeedEdit" value="1.3" type="text">
    <br>
    <br>
    <input checked="true" onchange="if (checked) clearWhenSlowEdit.checked = false;" id="restartWhenSlowEdit" type="checkbox">restart when speed gets too low
    <br>
    <input onchange="if (checked) restartWhenSlowEdit.checked = false;" id="clearWhenSlowEdit" type="checkbox">stay still when speed gets too low and continue with normal speed afterfords
    <br>
  </p>
  <br>
  <input type="checkbox" id="spielzeugWenigPlatzEdit" checked="true">Spielzeug kann auch aufgesammelt werden,wenn im Staubsauger eigentlich nicht mer genug Platz ist
  <br>
  <input id="spielzeugPlatzEdit" type="checkbox">Spielzeugt bleibt nicht im Sauger und nimmt somit auch keinen Platz ein
  <br>
  <h3>Teppich</h3>
  Verlangsamung (rechts ist weniger)<input value="11" id="verlangsamungTeppichEdit" min="11" max="19" type="range">
  <!-- <h3>Ladestation</h3> -->
  <p><input id="ladestationVorhandenEdit" checked="true" onchange="if (checked) ladestationDivEdit.style.display = 'inline'; else {ladestationDivEdit.style.display = 'none';}" type="checkbox"><font size="5">Ladestation</font></p>
  <div id="ladestationDivEdit">
    <input id="pixelBisLadenCheckEdit" onchange="if (checked) StaubAlsLadeBasisCheckEdit.checked = false;" type="checkbox"> nach <input type="text" id="pixelBisLadenTEdit" placeholder="anzahl" value="3333"> Pixeln Akku leer
    <br>
    <input onchange="if (checked) pixelBisLadenCheckEdit.checked = false;" id="StaubAlsLadeBasisCheckEdit" checked="true" type="checkbox"> nach <input id="staubAlsLadeBasisTEdit" type="text" placeholder="anzahl" value="5.5"> mal so vielen Pixeln, wie aller Staub zusammen Akku leer
  </div>
  <br>
  <p><input checked="true" id="entleererVorhandenEdit" onchange="if (checked) {entleererDivEdit.style.display = 'inline';} else { entleererDivEdit.style.display = 'none';}" type="checkbox"><font size="5">Entleerer (Staub beh√§lter entleeren, um neuen aufsammeln zu k√∂nnen)</font></p>
  <!-- <h3>Entleerer</h3> -->
  <div id="entleererDivEdit">
  <input id="pixelBisLeerenCheckEdit" onchange="if (checked) StaubAlsLeerBasisCheckEdit.checked = false;" type="checkbox"> nach <input  id="pixelBisLeerenTEdit" type="text" placeholder="anzahl" value="500"> Pixeln keinen Staub mehr aufnehmen
  <br>
  <input onchange="if (checked) pixelBisLeerenCheckEdit.checked = false;" id="StaubAlsLeerBasisCheckEdit" checked="true" type="checkbox"> nach <input id="StaubAlsLeerBasisTEdit" type="text" placeholder="anzahl" value="2">geteilt durch pixel Anzahl des gesamten Staubes keinen Staub mehr aufnehmen
  <br>
</div>
</div>
<br>
<select name="course" id="modeSelection" value="normal" onchange="modeSelected(value);">
  <option value="normal">random</option>
  <option value="vorgefertigt">vorgefertigt</option>
  <option value="uploaded">uploaded level</option>
  <option value="creator">level creator</option>
</select>
<br>
<button type="button" onclick="saveData();" id="saveData" name="button">Highscores und Pixel rates f√ºr offline Modus speichern</button>
<br>
<p id="pSaveAutomaticly"><input type="checkbox" onchange="localStorage.setItem('saveAutomaticly', checked);" id="saveAutomaticly">autosave</p>
<br>
<input id="useImage" type="checkbox">Bilder statt einfarbige Kreise und Rechtecke
<br>
Sensibilit√§t des Joy-Sticks (je weiter rechts, desto mehr Weg muss zurr√ºck gelegt werden)<input id="sensibility" onchange="window.scroll(9, 9);" type="range" min="1" max="27">
<br>
<input id="cleanerAudio" onchange="playCleanerSound();" type="checkbox"checked="true">Staubsauger Audio
<br>
<input id="clenerFiepAudio" onchange="playCleanerSound();" type="checkbox"checked="true">mit leichtem Piepen
<div id="wegWeiser">
  <br>
  <input onchange="showWayLadestation.checked = checked" type="checkbox">Weg zu Ladestation kennzeichnen
  <input id="showWayLaderWhenLow" type="checkbox">Nur anzeigen, wenn F√ºllstad zu niedrig
  <br>
  <input onchange="showWayEntleerer.checked = checked;" type="checkbox">Weg zu Entleerer kennzeichnen
  <input id="showWayEntleererWhenLow" type="checkbox">Nur anzeigen, wenn F√ºllstad zu hoch
</div>
<h1 id="nameEingeloggt" onclick='name = prompt ("Mit welchem Namen wollen sie sich eingloggen?"); nameEingeloggt.innerHTML = "als " + name + " eingeloggt"; getDatabase(undefined, true);'></h1>
<div id="app">
  <div id="authors" style="font-size: 25px" v-for="genre in genres">
    <h2 onclick="pixelRateSettings(innerHTML);">{{ genre }}</h2>
<ul id="db">
  <li id="titles" style="font-size: 23px" onclick="levelSelected(innerText.toString().split(' (')[0]);" v-for="abc in db[genre]"> {{ abc }} </li>
</ul>
</div>
</div>
<div id="offlineSelector">
  <h3>gespeicherte pixel rates (anklicken, um die Optionen zu sehen)</h3>
  <select name="course" value="please select" onchange="levelSelected(value.toString().split('-->')[1]);" id="Auswahl"></select>
</div>
<script src="https://adi.nicolaiweitkemper.de/Database2/js.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<div id="ball">
  <style>
    .shape {
      position: absolute;
      width: 50px;
      height: 50px;
      -webkit-radius: 50px;
      margin: 0;
      width padding: 0;
    }

    #sphere1 {
      border-radius: 50px;
      background-color: grey;
    }
    .bars {
      position: absolute;
      width: 11px;
      height: 40px;
      -webkit-radius: 50px;
      margin: 0;
      width padding: 0;
    }
    #energyBar {
      border-radius: 50px;
      background-color: green;
    }
    #trashBar {
      border-radius: 50px;
      background-color: #A4A4A4;
    }
  </style>
</div>
<div id="content">
  <div class="shape" id="sphere1"></div>
  <div class="bars" id="energyBar"></div>
  <div class="bars" id="trashBar"></div>
</div>
<script>
  function tryLevel() {
    if (mode == 'creator') {
      createNewPixelRate();
      setTimeout(function () {
        mode = 'testLevel';
      }, 1133);
      document.getElementById('tryLevel').innerHTML = 'stop test';
    } else {
       resetAfterTrying();
     }
  }
  var mouseOverTrash = false;
  var mode = "normal"
  var highscores = {normal: {}};
  var useSameRate = false;
  var realHeight = window.innerHeight;
  textur.style.display = "none";
  staubDiv.style.display = "none";
  verlangsamungSpielzeugP.style.display = "none";
  settings.style.display = "none";
  trash.style.display = "none";
  //wegWeiser.style.display = "none";
  maxTeppichHeight.value = 411;
  minTeppichWidth.value = 410;
  var creationHistory = [{}];
  function pixelRateChanged(value) {
    if (value.width) {textur.width = JSON.parse(value.width); pixelRateWidth.value = JSON.parse(JSON.stringify(value.width));}
    if (value.height) {textur.height = JSON.parse(value.height); pixelRateHeight.value = JSON.parse(JSON.stringify(value.height));}
    selected.pixelRate = textur.width + " x " + textur.height;
  }
  function modeSelected(value) {
    document.getElementById('app').style.display = "inline";
    if (value == "creator") {
      document.getElementById('app').style.display = "none";
      creationDiv.style.display = "inline";
      textur.style.display = "inline";
      selected.objects = {};
      elementSelected("staub");
      settings.style.display = "inline";
      spezifischeSettings.style.display = "none";
      useSameRate = false;
      resetPixelRate(["width", "height"]);
      // pixelRateWidth.value = window.innerWidth;
      // pixelRateHeight.value = window.innerHeight;
    }
    else {
      creationDiv.style.display = "none";
      settings.style.display = "none";
      spezifischeSettings.style.display = "inline";
      textur.style.display = "none";
    }
    mode = value;
    highscoresToList(highscores[mode]);
  }
  var beginningPoint = {};
  function mousedownOnCanvas() {// window.addEventListener('mousedown', function() {
    if (mode == "creator"/* || (mode == "testLevel" && joyStick != "place")*/) {
      /*if (beginningPoint.mouseUp) */beginningPoint = {};
      for (var i = 0; i < Object.keys(selected.objects).length; i++) {
      for (var i1 = 0; i1 < selected.objects[Object.keys(selected.objects)[i]].length; i1++) {
        if (selected.objects[Object.keys(selected.objects)[i]][i1].selected) {
          if (!selected.waitMouseUp) creationHistory.push(JSON.parse(JSON.stringify(selected.objects)));
          selected.objects[Object.keys(selected.objects)[i]][i1].selected = false;
          selected.waitMouseUp = true;
        }
      }
    }
    beginningPoint.x = JSON.parse(JSON.stringify(mausx));
    beginningPoint.y = JSON.parse(JSON.stringify(mausy));
    }
    if (selected.waitMouseUp) {
      beginningPoint = {};
      trash.style.display = "none";
    }
  }// });
  function resetAfterTrying(uploadHighscore) {
    try {
      audio.pause();
    } catch (e) {}
    verfallsdaten.ladung = 3;
    selected = {objects: selected.objects, pixelRate: selected.pixelRate, element: selected.element}
    joyStick = undefined;
    highscores.creator = {};
    energyBar.style.width = 0;
    trashBar.style.width = 0;
    mode = "creator";
    pause = false;
    settings.style.display = "inline"
    document.getElementById('tryLevel').innerHTML = 'try out your level (clear it to be able to upload it)';
    if (uploadHighscore) dbSetWarteschlange.push({tag: "highscores", data: highscores});
    cleanerAudioVar.pause();
  }
  function mouseUpOnCanvas() {// window.addEventListener('mouseup', function() {
    if (mode == "creator" && selected.element != "multiSelector") {
      if (pointOfCreationHistory + 1 != creationHistory.length) {
        creationHistory.push(JSON.parse(JSON.stringify(selected.objects)));
        console.log("extra schritt, weil nicht aktuell war");
      }
      pointOfCreationHistory = creationHistory.length;
      console.log(beginningPoint);
      if (!selected.objects[selected.element]) selected.objects[selected.element] = [];
      if (selected.radius > 0 && beginningPoint.x != undefined && beginningPoint.y != undefined && (selected.element == "staub" || selected.element == "schmuck" || selected.element == "spielzeug")) selected.objects[selected.element].push({x: beginningPoint.x, y:  beginningPoint.y, radius: selected.radius, collected: false});
      else if (!(isNaN(mausx - beginningPoint.x)) && !(isNaN(mausy - beginningPoint.y)) && mausx - beginningPoint.x != 0 && mausy - beginningPoint.y != 0) selected.objects[selected.element].push({x: beginningPoint.x, y: beginningPoint.y, width: mausx - beginningPoint.x, height: mausy - beginningPoint.y});
      if (selected.objects[selected.element].length > creationHistory[pointOfCreationHistory - 1][selected.element].length) creationHistory.push(JSON.parse(JSON.stringify(selected.objects)));
      console.log("new point of history created");
      beginningPoint = {};
      if (selected.objects[selected.element].length > creationHistory[pointOfCreationHistory]) pointOfCreationHistory++;
      console.log(creationHistory[pointOfCreationHistory - 1]);
    }
    else if (selected.element == "multiSelector" && !selected.waitMouseUp) {
      var anythingSelected = false;
      for (var i = 0; i < Object.keys(selected.objects).length; i++) {
        for (var i1 = 0; i1 < selected.objects[Object.keys(selected.objects)[i]].length; i1++) {
          if (!selected.objects[Object.keys(selected.objects)[i]][i1].width && selected.objects[Object.keys(selected.objects)[i]][i1].radius) {
            // canvas.fillStyle = "blue";
            // canvas.fillRect(selected.objects[Object.keys(selected.objects)[i]][i1].x - selected.objects[Object.keys(selected.objects)[i]][i1].radius, selected.objects[Object.keys(selected.objects)[i]][i1].y - selected.objects[Object.keys(selected.objects)[i]][i1].radius, 10, 10);
            // canvas.fillRect(selected.objects[Object.keys(selected.objects)[i]][i1].x/* - selected.objects[Object.keys(selected.objects)[i]][i1].radius + */ + selected.objects[Object.keys(selected.objects)[i]][i1].radius, selected.objects[Object.keys(selected.objects)[i]][i1].y/* - selected.objects[Object.keys(selected.objects)[i]][i1].radius + */ + selected.objects[Object.keys(selected.objects)[i]][i1].radius, 10, 10);
            if (selected.objects[Object.keys(selected.objects)[i]][i1].x - selected.objects[Object.keys(selected.objects)[i]][i1].radius > beginningPoint.x && selected.objects[Object.keys(selected.objects)[i]][i1].x/* - selected.objects[Object.keys(selected.objects)[i]][i1].radius + */ + selected.objects[Object.keys(selected.objects)[i]][i1].radius/**2*/ > beginningPoint.x + selected.objects[Object.keys(selected.objects)[i]][i1].radius*2 && selected.objects[Object.keys(selected.objects)[i]][i1].x/* - selected.objects[Object.keys(selected.objects)[i]][i1].radius + */ + selected.objects[Object.keys(selected.objects)[i]][i1].radius/**2*/ < mausx && selected.objects[Object.keys(selected.objects)[i]][i1].y - selected.objects[Object.keys(selected.objects)[i]][i1].radius > beginningPoint.y && selected.objects[Object.keys(selected.objects)[i]][i1].y/* - selected.objects[Object.keys(selected.objects)[i]][i1].radius + */ + selected.objects[Object.keys(selected.objects)[i]][i1].radius/**2*/ > beginningPoint.y + selected.objects[Object.keys(selected.objects)[i]][i1].radius*2 && selected.objects[Object.keys(selected.objects)[i]][i1].y/* - selected.objects[Object.keys(selected.objects)[i]][i1].radius + */ + selected.objects[Object.keys(selected.objects)[i]][i1].radius < mausy) {   selected.objects[Object.keys(selected.objects)[i]][i1].selected = true;
            selected.objects[Object.keys(selected.objects)[i]][i1].beginningPoint = {x: selected.objects[Object.keys(selected.objects)[i]][i1].x, y: selected.objects[Object.keys(selected.objects)[i]][i1].y};
          }
          anythingSelected = true;
          }//var size = {width: selected.objects[Object.keys(selected.objects)[i]][i1].radius, height: selected.objects[Object.keys(selected.objects)[i]][i1].radius}
          else {
            if (selected.objects[Object.keys(selected.objects)[i]][i1].x > beginningPoint.x && selected.objects[Object.keys(selected.objects)[i]][i1].x + mausx - beginningPoint.x > beginningPoint.x + selected.objects[Object.keys(selected.objects)[i]][i1].width && selected.objects[Object.keys(selected.objects)[i]][i1].y > beginningPoint.y && selected.objects[Object.keys(selected.objects)[i]][i1].y + mausy - beginningPoint.y > beginningPoint.y + selected.objects[Object.keys(selected.objects)[i]][i1].height) {
              selected.objects[Object.keys(selected.objects)[i]][i1].selected = true;
              selected.objects[Object.keys(selected.objects)[i]][i1].beginningPoint = {x: selected.objects[Object.keys(selected.objects)[i]][i1].x, y: selected.objects[Object.keys(selected.objects)[i]][i1].y};
          }
          anythingSelected = true;
          }//var size = {width: selected.objects[Object.keys(selected.objects)[i]][i1].width, height: selected.objects[Object.keys(selected.objects)[i]][i1].height};
          // if (selected.objects[Object.keys(selected.objects)[i]][i1].x > beginningPoint.x && selected.objects[Object.keys(selected.objects)[i]][i1].x +  < beginningPoint.x + size.width && selected.objects[Object.keys(selected.objects)[i]][i1].x > beginningPoint.y && selected.objects[Object.keys(selected.objects)[i]][i1].y < beginningPoint.y + size.height) selected.objects[Object.keys(selected.objects)[i]][i1].selected = true;
        }
      }
      if (!anythingSelected) trash.style.display = "none";
      beginningPoint.mouseUp = true;
      trash.style.display = "inline";
      beginningPoint.x = JSON.parse(JSON.stringify(mausx));
      beginningPoint.y = JSON.parse(JSON.stringify(mausy));
    }
    if (selected.waitMouseUp) selected.waitMouseUp = false;
  }// });
  document.onmousemove = readMouseMove
  var mausx;
  var mausy;
  function readMouseMove(e) {
    if (!e.scrollIncluded) mausx = e.clientX + scrollX;
    if (!e.scrollIncluded) mausy = e.clientY + scrollY;
    if (trash.style.display == "inline") mausy -= 50;
    if (Object.keys(beginningPoint).length > 0 && !beginningPoint.mouseUp) {
      selected.ablage = JSON.parse(JSON.stringify(beginningPoint));
      if (selected.positionNow && (selected.positionNow.x > mausx || selected.positionNow.y > mausy)) {
        beginningPoint = {};
        setTimeout(function () {
          preview();
      }, 20);
      }
      else preview();
    }
    else if (Object.keys(beginningPoint).length > 0) {
      for (var i = 0; i < Object.keys(selected.objects).length; i++) {
        for (var i1 = 0; i1 < selected.objects[Object.keys(selected.objects)[i]].length; i1++) {
          if (selected.objects[Object.keys(selected.objects)[i]][i1].selected) {
            selected.objects[Object.keys(selected.objects)[i]][i1].x = selected.objects[Object.keys(selected.objects)[i]][i1].beginningPoint.x + (mausx - beginningPoint.x);
            selected.objects[Object.keys(selected.objects)[i]][i1].y = selected.objects[Object.keys(selected.objects)[i]][i1].beginningPoint.y + (mausy - beginningPoint.y);
          }
        }
      }
    }
  }
  var pointOfCreationHistory = 0;
  document.onkeydown = function(event) {
    var rateAblage = {width: pixelRateWidth.value, height: pixelRateHeight.value};
    if (event.key == "Delete" && mode == "creator" && beginningPoint.mouseUp) {
      for (var i = 0; i < Object.keys(selected.objects).length; i++) {
        for (var i1 = 0; i1 < selected.objects[Object.keys(selected.objects)[i]].length; i1++) {
          if (selected.objects[Object.keys(selected.objects)[i]][i1].selected) {
            selected.objects[Object.keys(selected.objects)[i]].splice(i1, 1);
            i1--;
          }
        }
      }
      creationHistory.push(JSON.parse(JSON.stringify(selected.objects)));
      pointOfCreationHistory++;
      beginningPoint = {};
      trash.style.display = 'none';
      trash.style.color = 'black';
    }
    if (event.key == "p" && !pause) pause = true;
    else if (event.key == "p") pause = false;
    if (event.key == "z" && event.ctrlKey && (pointOfCreationHistory > 0)) {
      pointOfCreationHistory--;
      selected.objects = JSON.parse(JSON.stringify(creationHistory[pointOfCreationHistory]));
      setTimeout(function () {
        if (pixelRateWidth.value != rateAblage.width || pixelRateHeight.value != rateAblage.height) pixelRateChanged(rateAblage);
        // pixelRateWidth.value = rateAblage.width;
        // pixelRateHeight.value = rateAblage.height;
      }, 1);
    }
    if ((event.key == "y" || event.key == "Z") && event.ctrlKey && (pointOfCreationHistory < creationHistory.length - 1)) {
      pointOfCreationHistory++;
      selected.objects = JSON.parse(JSON.stringify(creationHistory[pointOfCreationHistory]));
      setTimeout(function () {
        // pixelRateWidth.value = JSON.parse(JSON.stringify(rateAblage.width));
        // pixelRateHeight.value = JSON.parse(JSON.stringify(rateAblage.height));
        if (pixelRateWidth.value != rateAblage.width || pixelRateHeight.value != rateAblage.height) pixelRateChanged(rateAblage);
      }, 1);
    }
  }
  function preview() {
    beginningPoint = selected.ablage;
    var elementColor = {staub: "gray", schmuck: "yellow", spielzeug: "red", moebel: "#FACC2E", vertiefung: "black", ladestation: "green", leererStation: "gray", teppich: "#2EFE2E", multiSelector: "#FF00BF"};
    if (elementColor[selected.element]) canvas.fillStyle = elementColor[selected.element];
    selected.positionNow = {x: mausx, y: mausy};
    if (selected.element == "staub" || selected.element == "schmuck" || selected.element == "spielzeug") {
      if ((mausx - beginningPoint.x)*2 < JSON.parse(staubsaugerSize.value) && !((mausx - beginningPoint.x)*2 < 1 && (mausx - beginningPoint.x)*(-2) > JSON.parse(staubsaugerSize.value))) selected.radius = mausx - beginningPoint.x;
      if (selected.radius < 1) selected.radius *= (-1);
      canvas.beginPath();
      canvas.arc(beginningPoint.x, beginningPoint.y, selected.radius, 0, Math.PI*2, false);
      canvas.fill();
    }
    else {
      canvas.fillRect(beginningPoint.x, beginningPoint.y, mausx - beginningPoint.x, mausy - beginningPoint.y);
      console.log("width: " + (mausx - beginningPoint.x) + ", height: " + (mausy - beginningPoint.y));
    }
  }
  var allElements = ["staub", "schmuck", "spielzeug", "teppich", "moebel", "vertiefung", "ladestation", "leererStation", "multiSelector"];
  function elementSelected(id) {
    selected.element = id;
    for (var i = 0; i < allElements.length; i++) {
      document.getElementById(allElements[i]).style.background = "";
      if (!selected.objects[allElements[i]]) selected.objects[allElements[i]] = [];
    }
    document.getElementById(id).style.background = "#00FFFF";
  }
  function checkMark(data, type) {
    if (data.selected) {
      canvas.globalAlpha = 0.4;
      canvas.fillStyle = "#FF00BF";
      if (type == "cycle") {
        canvas.beginPath();
        canvas.arc(data.x, data.y, data.radius, 0, Math.PI*2, false);
        canvas.fill();
      }
      else {
        canvas.fillRect(data.x, data.y, data.width, data.height);
      }
    }
    canvas.globalAlpha = 1;
  }
  function resetPixelRate(rates) {
    /*
    if (useSameRate == false) {pixelRateWidth.value = (window.innerWidth - 9); pixelRateHeight.value = (window.innerHeight - 9);}//selected.pixelRate = (window.innerWidth - 9) + " x " + (window.innerHeight - 9);
    else selected.pixelRate = useSameRate;
    */
    if (rates.includes("width")) {
      if (useSameRate == false) pixelRateWidth.value = (window.innerWidth - 9);
      else pixelRateWidth.value = useSameRate.toString().split(" x ")[0];
    }
    if (rates.includes("height")) {
      if (useSameRate == false) pixelRateHeight.value = (window.innerHeight - 9);
      else pixelRateHeight.value = useSameRate.toString().split(" x ")[1];
    }
  }
  function pixelRateSettings(innerHTML) {
    useSameRate = false;
     if (innerHTML == 'create own pixel rate') settings.style.display = 'inline';
     else if (confirm('Wollen sie genau diese Gr√∂√üe als pixelRate verwenden?')) {
       settings.style.display = 'inline';
        useSameRate = innerHTML
      }
      settingsAnpassen();
      resetPixelRate(["width", "height"]);
  }
  function settingsAnpassen() {
    var pWindow = {innerWidth: window.innerWidth, innerHeight: window.innerHeight};
    if (useSameRate != false) {pWindow.innerWidth = JSON.parse(useSameRate.toString().split(" x ")[0]); pWindow.innerHeight = JSON.parse(useSameRate.toString().split(" x ")[1]);}
    anzahlStaub.value = Math.round(pWindow.innerWidth/25);
    maxTeppichWidth.max = pWindow.innerWidth;
    maxTeppichHeight.max = pWindow.innerHeight;
    minTeppichWidth.max = pWindow.innerWidth - 1;
    minTeppichHeight.max = pWindow.innerHeight - 1;
    maxLochWidth.max = pWindow.innerWidth;
    maxLochHeight.max = pWindow.innerHeight;
    minLochWidth.max = pWindow.innerWidth - 1;
    minLochHeight.max = pWindow.innerHeight - 1;
  }
  // spielzeugDiv.style.display = "none";
  // sphere1.style.top = "175";
  // sphere1.style.left = "9";
  // energyBar.style.left = "20";
  // energyBar.style.top = "180";
  // trashBar.style.left = "37";
  // trashBar.style.top = "180";
  // setTimeout(function () {
  //   energyBar.style.height = 30;
  //   energyBar.style.top = "190";
  // }, 3333);
  var canvas = textur.getContext('2d');
  if (!localStorage.getItem("storedName")) var name = prompt("Bitte geben sie ihren (spitz) Namen ein, um ihre Highscores speichern zu k√∂nnen");
  else var name = localStorage.getItem("storedName");
localStorage.setItem("storedName", name);
  nameEingeloggt.innerHTML = "als " + name + " eingeloggt"
  getDatabase(undefined, true);
  console.log(window.innerWidth + " - " + window.innerHeight);
  function getVorgefertigteLevel() {
    // my level:
    highscores.vorgefertigt = /*JSON.parse(*/'{"1465 x 692":{"loecher: 1, Moebel: 5, Teppich: 2, Ladestationen: 1, Entleerer: 1, Spielzeug: 2, schmuck: 1, Staub: 36":{"pixelRate":"1465 x 692","settings":"Neustart wenn Wand ber√ºhrt: true, bounce von R√§ndern: false, stoppe bei Spielzeug: true, werde langsamer bei Spielzeug: false, neu starten, wenn Geschwindigkeit zu gering wird: true, oder bleibe stehen und mache danach weiter: false, Spielzeug kann auch bei zu wenig Platz aufgesammelt werden: true, Spielzeug frisst keinen Platz im Speicher: false, gegen Steuerungsrichtung: false","settingsConverted":{"value":{"staubsaugerSize":"50","verlangsamungTeppich":"11","slowestSpeed":"1.3","zeitLangsamer":"endless"},"checked":{"oppsositeDirection":false,"bounceWalls":false,"stoppeBeiSpielzeug":true,"langsamerBeiSpielzeug":false,"spielzeugWenigPlatz":true,"spielzeugPlatz":false,"clearWhenSlow":false,"restartWhenSlow":true}},"objects":{"staub":[{"x":670,"y":354,"radius":22,"collected":false},{"x":1199,"y":332,"radius":22,"collected":false},{"x":1208,"y":438,"radius":24,"collected":false},{"x":1200,"y":261,"radius":20,"collected":false},{"x":168,"y":86,"radius":24,"collected":false},{"x":192,"y":374,"radius":24,"collected":true},{"x":192,"y":598,"radius":24,"collected":false},{"x":895,"y":98,"radius":24,"collected":false},{"x":920,"y":235,"radius":24,"collected":false},{"x":936,"y":444,"radius":24,"collected":false},{"x":940,"y":613,"radius":24,"collected":false},{"x":1300,"y":593,"radius":24,"collected":false},{"x":1329,"y":72,"radius":24,"collected":false},{"x":1333,"y":373,"radius":24,"collected":false},{"x":914,"y":144,"radius":5,"collected":false},{"x":934,"y":293,"radius":5,"collected":false},{"x":934,"y":362,"radius":5,"collected":false},{"x":917,"y":191,"radius":5,"collected":false},{"x":944,"y":481,"radius":5,"collected":false},{"x":944,"y":551,"radius":5,"collected":false},{"x":1301,"y":546,"radius":5,"collected":false},{"x":1349,"y":415,"radius":5,"collected":false},{"x":1330,"y":500,"radius":5,"collected":false},{"x":1340,"y":256,"radius":5,"collected":false},{"x":1340,"y":189,"radius":5,"collected":false},{"x":1340,"y":151,"radius":5,"collected":false},{"x":1275,"y":92,"radius":5,"collected":false},{"x":1189,"y":92,"radius":5,"collected":false},{"x":1104,"y":98,"radius":5,"collected":false},{"x":1036,"y":103,"radius":5,"collected":false},{"x":989,"y":103,"radius":5,"collected":false},{"x":1009,"y":609,"radius":5,"collected":false},{"x":1063,"y":617,"radius":5,"collected":false},{"x":1112,"y":616,"radius":5,"collected":false},{"x":1196,"y":620,"radius":5,"collected":false},{"x":1244,"y":620,"radius":5,"collected":false}],"schmuck":[{"x":578,"y":352,"radius":19,"collected":false}],"spielzeug":[{"x":488,"y":596,"radius":23,"collected":false},{"x":499,"y":113,"radius":22,"collected":false}],"teppich":[{"x":500,"y":179,"width":212,"height":379},{"x":1154,"y":216,"width":102,"height":290}],"moebel":[{"x":638,"y":423,"width":63,"height":124},{"x":650,"y":198,"width":51,"height":101},{"x":384,"y":656,"width":97,"height":45},{"x":436,"y":9,"width":60,"height":63},{"x":1176,"y":374,"width":66,"height":38}],"vertiefung":[{"x":1159,"y":127,"width":91,"height":85}],"ladestation":[{"x":746,"y":666,"width":97,"height":30}],"leererStation":[{"x":1159,"y":9,"width":92,"height":30}]},"maxVerfallsdaten":{"ladung":3372.6,"f√ºllungLeft":219}, "name": "Hin und her"}}'//);
    highscores.vorgefertigt += ', "800 x 600":{"loecher: 1, Moebel: 1, Teppich: 1, Ladestationen: 1, Entleerer: 1, Spielzeug: 3, schmuck: 2, Staub: 13":{"pixelRate":"800 x 600","settings":"Neustart wenn Wand ber√ºhrt: true, bounce von R√§ndern: false, stoppe bei Spielzeug: true, werde langsamer bei Spielzeug: false, neu starten, wenn Geschwindigkeit zu gering wird: true, oder bleibe stehen und mache danach weiter: false, Spielzeug kann auch bei zu wenig Platz aufgesammelt werden: true, Spielzeug frisst keinen Platz im Speicher: false, gegen Steuerungsrichtung: false","settingsConverted":{"value":{"staubsaugerSize":"50","verlangsamungTeppich":"11","slowestSpeed":"1.3","zeitLangsamer":"endless"},"checked":{"oppsositeDirection":false,"bounceWalls":false,"stoppeBeiSpielzeug":true,"langsamerBeiSpielzeug":false,"spielzeugWenigPlatz":true,"spielzeugPlatz":false,"clearWhenSlow":false,"restartWhenSlow":true}},"objects":{"staub":[{"radius":16,"collected":false},{"x":211,"y":452,"radius":21,"collected":false,"selected":false,"beginningPoint":{"x":339,"y":568}},{"x":51,"y":552,"radius":22,"collected":false,"selected":false,"beginningPoint":{"x":179,"y":668}},{"x":343,"y":405,"radius":22,"collected":false,"selected":false,"beginningPoint":{"x":471,"y":521}},{"x":416,"y":374,"radius":17,"collected":false,"selected":false,"beginningPoint":{"x":544,"y":490}},{"radius":8,"collected":false},{"x":496,"y":350,"radius":8,"collected":false,"selected":false,"beginningPoint":{"x":624,"y":466}},{"x":562,"y":308,"radius":12,"collected":false,"selected":false,"beginningPoint":{"x":690,"y":424}},{"radius":9,"collected":false},{"x":642,"y":277,"radius":6,"collected":false,"selected":false,"beginningPoint":{"x":770,"y":393}},{"x":674,"y":260,"radius":5,"collected":false,"selected":false,"beginningPoint":{"x":802,"y":376}},{"x":698,"y":242,"radius":3,"collected":false,"selected":false,"beginningPoint":{"x":826,"y":358}},{"x":721,"y":229,"radius":2,"collected":false,"selected":false,"beginningPoint":{"x":849,"y":345}}],"schmuck":[{"x":530,"y":332,"radius":12,"collected":false,"selected":false,"beginningPoint":{"x":658,"y":448}},{"x":781,"y":187,"radius":16,"collected":false,"selected":false,"beginningPoint":{"x":909,"y":303}}],"spielzeug":[{"x":378,"y":378,"radius":12,"collected":false,"selected":false,"beginningPoint":{"x":506,"y":494}},{"x":462,"y":370,"radius":12,"collected":false,"selected":false,"beginningPoint":{"x":590,"y":486}},{"x":613,"y":297,"radius":12,"collected":false,"selected":false,"beginningPoint":{"x":741,"y":413}}],"teppich":[{"x":471,"y":233,"width":149,"height":210,"selected":false,"beginningPoint":{"x":599,"y":349}}],"moebel":[{"x":89,"y":470,"width":88,"height":107,"selected":false,"beginningPoint":{"x":217,"y":586}}],"vertiefung":[{"x":237,"y":351,"width":83,"height":159,"selected":false,"beginningPoint":{"x":365,"y":467}}],"ladestation":[{"x":491,"y":253,"width":29,"height":42,"selected":false,"beginningPoint":{"x":619,"y":369}}],"leererStation":[{"x":587,"y":250,"width":21,"height":27,"selected":false,"beginningPoint":{"x":715,"y":366}}]},"maxVerfallsdaten":{"ladung":1510,"f√ºllungLeft":151}, "name": "Akku laden nicht vergessen!"}}';
    highscores.vorgefertigt += ', "1000 x 600":{"loecher: 0, Moebel: 0, Teppich: 0, Ladestationen: 0, Entleerer: 0, Spielzeug: 0, schmuck: 0, Staub: 32":{"pixelRate":"1000 x 600","settings":"Neustart wenn Wand ber√ºhrt: true, bounce von R√§ndern: false, stoppe bei Spielzeug: true, werde langsamer bei Spielzeug: false, neu starten, wenn Geschwindigkeit zu gering wird: true, oder bleibe stehen und mache danach weiter: false, Spielzeug kann auch bei zu wenig Platz aufgesammelt werden: true, Spielzeug frisst keinen Platz im Speicher: false, gegen Steuerungsrichtung: false","settingsConverted":{"value":{"staubsaugerSize":"50","verlangsamungTeppich":"11","slowestSpeed":"1.3","zeitLangsamer":"endless"},"checked":{"oppsositeDirection":false,"bounceWalls":false,"stoppeBeiSpielzeug":true,"langsamerBeiSpielzeug":false,"spielzeugWenigPlatz":true,"spielzeugPlatz":false,"clearWhenSlow":false,"restartWhenSlow":true}},"objects":{"staub":[{"radius":24,"collected":false},{"x":161,"y":297,"radius":24,"collected":false},{"x":210,"y":378,"radius":24,"collected":false},{"x":307,"y":436,"radius":24,"collected":false},{"x":412,"y":466,"radius":24,"collected":false},{"x":561,"y":456,"radius":24,"collected":false},{"x":253,"y":270,"radius":24,"collected":false},{"x":315,"y":241,"radius":24,"collected":false},{"x":370,"y":151,"radius":24,"collected":false},{"x":424,"y":131,"radius":24,"collected":false},{"x":504,"y":103,"radius":24,"collected":false},{"x":674,"y":46,"radius":24,"collected":false},{"x":827,"y":78,"radius":24,"collected":false},{"x":563,"y":78,"radius":24,"collected":false},{"x":640,"y":457,"radius":24,"collected":false},{"x":725,"y":444,"radius":24,"collected":false},{"x":872,"y":420,"radius":24,"collected":false},{"x":887,"y":287,"radius":24,"collected":false},{"x":734,"y":290,"radius":24,"collected":false},{"x":580,"y":335,"radius":24,"collected":false},{"x":453,"y":399,"radius":24,"collected":false},{"x":372,"y":354,"radius":24,"collected":false},{"x":440,"y":264,"radius":24,"collected":false},{"x":508,"y":203,"radius":24,"collected":false},{"x":682,"y":305,"radius":24,"collected":false},{"x":679,"y":138,"radius":24,"collected":false},{"x":615,"y":214,"radius":24,"collected":false},{"x":770,"y":200,"radius":24,"collected":false},{"x":835,"y":146,"radius":24,"collected":false},{"x":854,"y":223,"radius":24,"collected":false},{"x":698,"y":377,"radius":24,"collected":false},{"x":582,"y":399,"radius":24,"collected":false}],"schmuck":[],"spielzeug":[],"teppich":[],"moebel":[],"vertiefung":[],"ladestation":[],"leererStation":[],"multiSelector":[]},"maxVerfallsdaten":{"ladung":4300.799999999999}, "name": "Finde den richtigen Weg"}}';
    highscores.vorgefertigt += ', "666 x 500":{"loecher: 0, Moebel: 0, Teppich: 0, Ladestationen: 0, Entleerer: 0, Spielzeug: 13, schmuck: 21, Staub: 30":{"pixelRate":"666 x 500","settings":"Neustart wenn Wand ber√ºhrt: true, bounce von R√§ndern: false, stoppe bei Spielzeug: true, werde langsamer bei Spielzeug: false, neu starten, wenn Geschwindigkeit zu gering wird: true, oder bleibe stehen und mache danach weiter: false, Spielzeug kann auch bei zu wenig Platz aufgesammelt werden: true, Spielzeug frisst keinen Platz im Speicher: false, gegen Steuerungsrichtung: false","settingsConverted":{"value":{"staubsaugerSize":"50","verlangsamungTeppich":"11","slowestSpeed":"1.3","zeitLangsamer":"endless"},"checked":{"oppsositeDirection":false,"bounceWalls":false,"stoppeBeiSpielzeug":true,"langsamerBeiSpielzeug":false,"spielzeugWenigPlatz":true,"spielzeugPlatz":false,"clearWhenSlow":false,"restartWhenSlow":true}},"objects":{"staub":[{"x":90,"y":158,"radius":21,"collected":true},{"x":107,"y":276,"radius":21,"collected":true},{"x":107,"y":348,"radius":21,"collected":true},{"x":136,"y":414,"radius":21,"collected":true},{"x":293,"y":425,"radius":13,"collected":false},{"x":249,"y":437,"radius":13,"collected":false},{"x":253,"y":307,"radius":13,"collected":true},{"x":203,"y":301,"radius":13,"collected":true},{"x":295,"y":138,"radius":13,"collected":false},{"x":416,"y":167,"radius":13,"collected":false},{"x":305,"y":269,"radius":13,"collected":false},{"x":209,"y":235,"radius":13,"collected":false},{"x":412,"y":189,"radius":13,"collected":false},{"x":504,"y":334,"radius":13,"collected":false},{"x":362,"y":372,"radius":13,"collected":false},{"x":419,"y":237,"radius":13,"collected":false},{"x":572,"y":238,"radius":13,"collected":false},{"x":577,"y":335,"radius":13,"    collected":false,"collected":false},{"x":416,"y":450,"radius":13,"collected":false},{"x":510,"y":123,"radius":13,"collected":false},{"x":586,"y":74,"radius":13,"collected":false},{"x":426,"y":67,"radius":13,"collected":false},{"x":355,"y":99,"radius":13,"collected":false},{"x":273,"y":35,"radius":13,"collected":false},{"x":171,"y":104,"radius":13,"collected":true},{"x":171,"y":20,"radius":13,"collected":false},{"x":39,"y":204,"radius":13,"collected":true},{"x":77,"y":282,"radius":13,"collected":true},{"x":19,"y":401,"radius":13,"collected":false},{"x":81,"y":414,"radius":13,"collected":false}],"schmuck":[{"x":363,"y":300,"radius":13,"collected":false},{"x":515,"y":311,"radius":13,"collected":false},{"x":581,"y":282,"radius":13,"collected":false},{"x":530,"y":181,"radius":13,"collected":false},{"x":283,"y":359,"radius":13,"collected":false},{"x":207,"y":364,"radius":13,"collected":false},{"x":144,"y":243,"radius":13,"collected":false},{"x":182,"y":124,"radius":13,"collected":false},{"x":256,"y":136,"radius":13,"collected":false},{"x":345,"y":59,"radius":13,"collected":false},{"x":352,"y":242,"radius":13,"collected":false},{"x":352,"y":242,"radius":13,"collected":false},{"x":272,"y":187,"radius":13,"collected":false},{"x":130,"y":203,"radius":13,"collected":false},{"x":95,"y":54,"radius":13,"collected":false},{"x":451,"y":386,"radius":13,"collected":false},{"x":587,"y":390,"radius":13,"collected":false},{"x":337,"y":457,"radius":13,"collected":false},{"x":116,"y":471,"radius":13,"collected":false},{"x":585,"y":156,"radius":13,"collected":false},{"x":491,"y":36,"radius":13,"collected":false}],"spielzeug":[{"x":514,"y":453,"radius":13,"collected":false},{"x":496,"y":269,"radius":13,"collected":false},{"x":388,"y":400,"radius":13,"collected":false},{"x":44,"y":335,"radius":13,"collected":false},{"x":12,"y":136,"radius":13,"collected":false},{"x":222,"y":60,"radius":13,"collected":false},{"x":426,"y":22,"radius":13,"collected":false},{"x":358,"y":199,"radius":13,"collected":false},{"x":227,"y":264,"radius":13,"collected":false},{"x":160,"y":344,"radius":13,"collected":false},{"x":201,"y":440,"radius":13,"collected":false},{"x":423,"y":323,"radius":13,"collected":false},{"x":437,"y":112,"radius":13,"collected":false}],"teppich":[],"moebel":[],"vertiefung":[],"ladestation":[],"leererStation":[],"multiSelector":[]},"maxVerfallsdaten":{},"name":"Das Labyrinth"}}';
    highscores.vorgefertigt += ', "703 x 792": {"loecher: 1, Moebel: 0, Teppich: 0, Ladestationen: 0, Entleerer: 0, Spielzeug: 0, schmuck: 0, Staub: 66":{"pixelRate":"703 x 792","settings":"Neustart wenn Wand ber√ºhrt: true, bounce von R√§ndern: false, stoppe bei Spielzeug: true, werde langsamer bei Spielzeug: false, neu starten, wenn Geschwindigkeit zu gering wird: true, oder bleibe stehen und mache danach weiter: false, Spielzeug kann auch bei zu wenig Platz aufgesammelt werden: true, Spielzeug frisst keinen Platz im Speicher: false, gegen Steuerungsrichtung: false","settingsConverted":{"value":{"staubsaugerSize":"50","verlangsamungTeppich":"11","slowestSpeed":"1.3","zeitLangsamer":"endless"},"checked":{"oppsositeDirection":false,"bounceWalls":false,"stoppeBeiSpielzeug":true,"langsamerBeiSpielzeug":false,"spielzeugWenigPlatz":true,"spielzeugPlatz":false,"clearWhenSlow":false,"restartWhenSlow":true}},"objects":{"staub":[{"x":103,"y":113,"radius":16,"collected":true},{"x":97,"y":169,"radius":15,"collected":true},{"x":107,"y":260,"radius":15,"collected":true},{"x":107,"y":338,"radius":15,"collected":true},{"x":107,"y":418,"radius":15,"collected":true},{"x":107,"y":490,"radius":23,"collected":true},{"x":106,"y":564,"radius":23,"collected":true},{"x":108,"y":638,"radius":23,"collected":true},{"x":105,"y":700,"radius":23,"collected":true},{"x":126,"y":742,"radius":23,"collected":true},{"x":219,"y":748,"radius":23,"collected":true},{"x":290,"y":749,"radius":23,"collected":true},{"x":354,"y":749,"radius":23,"collected":true},{"x":407,"y":749,"radius":23,"collected":true},{"x":471,"y":750,"radius":23,"collected":true},{"x":483,"y":702,"radius":23,"collected":true},{"x":483,"y":643,"radius":23,"collected":true},{"x":483,"y":594,"radius":23,"collected":true},{"x":483,"y":539,"radius":23,"collected":true},{"x":483,"y":488,"radius":23,"collected":true},{"x":493,"y":411,"radius":23,"collected":true},{"x":486,"y":355,"radius":24,"collected":true},{"x":492,"y":300,"radius":24,"collected":true},{"x":556,"y":296,"radius":24,"collected":true},{"x":625,"y":298,"radius":24,"collected":true},{"x":676,"y":298,"radius":24,"collected":true},{"x":679,"y":244,"radius":24,"collected":true},{"x":676,"y":209,"radius":24,"collected":true},{"x":668,"y":177,"radius":24,"collected":true},{"x":668,"y":122,"radius":24,"collected":true},{"x":668,"y":68,"radius":24,"collected":true},{"x":607,"y":68,"radius":24,"collected":true},{"x":527,"y":70,"radius":24,"collected":true},{"x":475,"y":74,"radius":24,"collected":true},{"x":417,"y":70,"radius":24,"collected":true},{"x":354,"y":79,"radius":24,"collected":true},{"x":294,"y":80,"radius":24,"collected":true},{"x":221,"y":80,"radius":24,"collected":true},{"x":165,"y":90,"radius":24,"collected":true},{"x":164,"y":154,"radius":24,"collected":true},{"x":175,"y":215,"radius":24,"collected":true},{"x":175,"y":267,"radius":24,"collected":true},{"x":172,"y":331,"radius":24,"collected":true},{"x":172,"y":386,"radius":24,"collected":true},{"x":172,"y":449,"radius":24,"collected":true},{"x":172,"y":509,"radius":24,"collected":true},{"x":172,"y":576,"radius":24,"collected":true},{"x":172,"y":640,"radius":24,"collected":true},{"x":235,"y":645,"radius":24,"collected":true},{"x":301,"y":645,"radius":24,"collected":true},{"x":377,"y":645,"radius":24,"collected":true},{"x":383,"y":592,"radius":24,"collected":true},{"x":382,"y":532,"radius":24,"collected":true},{"x":381,"y":473,"radius":24,"collected":true},{"x":381,"y":416,"radius":24,"collected":true},{"x":372,"y":360,"radius":24,"collected":true},{"x":370,"y":266,"radius":24,"collected":true},{"x":370,"y":312,"radius":24,"collected":true},{"x":376,"y":220,"radius":24,"collected":true},{"x":301,"y":213,"radius":24,"collected":true},{"x":290,"y":262,"radius":24,"collected":true},{"x":290,"y":337,"radius":24,"collected":true},{"x":285,"y":398,"radius":24,"collected":true},{"x":285,"y":455,"radius":24,"collected":true},{"x":267,"y":515,"radius":24,"collected":true},{"x":255,"y":572,"radius":24,"collected":true}],"schmuck":[],"spielzeug":[],"teppich":[],"moebel":[],"vertiefung":[{"x":552,"y":366,"width":138,"height":411}],"ladestation":[],"leererStation":[],"multiSelector":[]},"maxVerfallsdaten":{"ladung":4572}, "name": "Effizienz ist alles!"}}}'
    highscores.vorgefertigt = JSON.parse(highscores.vorgefertigt);
    /*
    selected.objects = JSON.parse('{"staub":[{"radius":16,"collected":false},{"x":339,"y":568,"radius":21,"collected":false},{"x":179,"y":668,"radius":22,"collected":false},{"x":471,"y":521,"radius":22,"collected":false},{"x":544,"y":490,"radius":17,"collected":false},{"radius":8,"collected":false},{"x":624,"y":466,"radius":8,"collected":false},{"x":690,"y":424,"radius":12,"collected":false},{"radius":9,"collected":false},{"x":770,"y":393,"radius":6,"collected":false},{"x":802,"y":376,"radius":5,"collected":false},{"x":826,"y":358,"radius":3,"collected":false},{"x":849,"y":345,"radius":2,"collected":false}],"schmuck":[{"x":658,"y":448,"radius":12,"collected":false},{"x":909,"y":303,"radius":16,"collected":false}],"spielzeug":[{"x":506,"y":494,"radius":12,"collected":false},{"x":590,"y":486,"radius":12,"collected":false},{"x":741,"y":413,"radius":12,"collected":false}],"teppich":[{"x":599,"y":349,"width":149,"height":210}],"moebel":[{"x":217,"y":586,"width":88,"height":107}],"vertiefung":[{"x":365,"y":467,"width":83,"height":159}],"ladestation":[{"x":619,"y":369,"width":29,"height":42}],"leererStation":[{"x":715,"y":366,"width":21,"height":27}]}')
    */
  }
  function getDatabase(sync, first) {
    dbGet("cleanTheRoom", "highscores").then(result => {
      highscores = result;
      if (first) modeSelected("normal");
      getVorgefertigteLevel();
      offlineSelector.style.display = "none";
      //clickListCheck();
        // pixelRate: selected.pixelRate, gegenstaende: selected.gegenstaende, ger√§t: selected.ger√§t, joyStick: (joyStickPlay.checked + "").replace("true", "joy-stick").replace("false", "no joy-stick"), data: mins + ":" + secs + ":" + "0" + tenths
        var doublePixelRates = [];
        if (localStorage.getItem("newPixelRate") != undefined) {
          // newPixelRates.push({pixelRate: selected.pixelRate, gegenstaende: selected.gegenstaende, data: highscores[mode][selected.pixelRate][selected.gegenstaende]});
          for (var i = 0; i < JSON.parse(localStorage.getItem("newPixelRate")).length; i++) {
            var newPixelRate = JSON.parse(localStorage.getItem("newPixelRate"))[i];
            if (!highscores[mode][newPixelRate.pixelRate]) highscores[mode][newPixelRate.pixelRate] = {};
            if (!highscores[mode][newPixelRate.pixelRate][newPixelRate.gegenstaende]) highscores[mode][newPixelRate.pixelRate][newPixelRate.gegenstaende] = {};
            else {doublePixelRates.push(JSON.parse(JSON.stringify(newPixelRate))); newPixelRate += "|";}
            highscores[mode][newPixelRate.pixelRate][newPixelRate.gegenstaende] = newPixelRate.data;
          }
          localStorage.setItem("newPixelRate", JSON.stringify([]));
          if (i > 0) dbSetWarteschlange.push({tag: "highscores", data: highscores});
        }
        if (!sync && localStorage.getItem("newHighscores") != undefined) {
          for (var i = 0; i < JSON.parse(localStorage.getItem("newHighscores")).length; i++) {
            var newHighscore = JSON.parse(localStorage.getItem("newHighscores"))[i]
            if (doublePixelRates.includes(newHighscore)) newHighscore += "|";
            if (highscores[mode][newHighscore.pixelRate] && highscores[mode][newHighscore.pixelRate][newHighscore.gegenstaende]) {
            // if (!highscores[mode][newHighscore.pixelRate]) highscores[mode][newHighscore.pixelRate] = {};
             // if (!highscores[mode][newHighscore.pixelRate][newHighscore.gegenstaende]) highscores[mode][newHighscore.pixelRate][newHighscore.gegenstaende] = {highscores: {}};
             if (!highscores[mode][newHighscore.pixelRate][newHighscore.gegenstaende].highscores) highscores[mode][newHighscore.pixelRate][newHighscore.gegenstaende].highscores = {};
             if (!highscores[mode][newHighscore.pixelRate][newHighscore.gegenstaende].highscores[name]) highscores[mode][newHighscore.pixelRate][newHighscore.gegenstaende].highscores[name] = {};
             if (!highscores[mode][newHighscore.pixelRate][newHighscore.gegenstaende].highscores[name][newHighscore.ger√§t]) highscores[mode][newHighscore.pixelRate][newHighscore.gegenstaende].highscores[name][newHighscore.ger√§t] = {};
             highscores[mode][newHighscore.pixelRate][newHighscore.gegenstaende].highscores[name][newHighscore.ger√§t][newHighscore.joyStick] = newHighscore.data;
             localStorage.setItem("newHighscores", JSON.stringify([]));
           }
          }
          if (i > 0) dbSetWarteschlange.push({tag: "highscores", data: highscores});
        }
        if (sync) syncFinished = true;
        else if (localStorage.getItem("saveAutomaticly") != undefined) {
            saveAutomaticly.checked = localStorage.getItem("saveAutomaticly");
            if (saveAutomaticly.checked) localStorage.setItem("highscoresCleanTheRoom", JSON.stringify(highscores));
            pSaveAutomaticly.style.display = "inline";
          }
          else pSaveAutomaticly.style.display = "none";
          highscoresToList(highscores[mode]);
      console.log("sync finished!");
    }).catch(function(e) {
      if (first) modeSelected("normal");
      getVorgefertigteLevel();
      app = new Vue({
        el: '#app',
        data: {
          db: {"create own pixel rate": {}},
          genres: ["create own pixel rate"],
          input: '',
        }
      })
      //clickListCheck();
      if (sync) syncFinished = true;
      else if (e == "TypeError: Failed to fetch") {
        alert("Der offline Modus ist aktiviert! Sie k√∂nnen neue zuf√§llige Level erstellen (auch ohne dass sie gespeichert werden). Zudem k√∂nnen sie falls sie mit dieser Datei schon Mal die daten heruntergeladen haben die damaligen highscores angezeigen und neue, falls sie neue aufstellen, wenn sie mit dieser Datei sp√§ter ins Internet gehen hochgeladen! Leider k√∂nnen sie nicht mit Bewegungssteuerung spielen, weil die Seite daf√ºr sicher sein muss und das bei lokalen Dateien nicht m√∂glich ist. Das Audio wird erst gespeichert, wenn sie es bereits auf der Seite abgespielt haben.");
        offline = true;
        document.getElementById("saveData").style.display = "none";
        joyStickPlayP.style.display = "none";
        joyStickPlay.checked = true;
        if (localStorage.getItem("highscoresCleanTheRoom")) {
          highscores = JSON.parse(localStorage.getItem("highscoresCleanTheRoom"));
          highscoresToList(highscores[mode]);
        }
        else alert("Es wurde keine Aufzeichnung der Highscores oder pixel rates gefunden!");
      }
    });
  }
  app = new Vue({
    el: '#app',
    data: {
      db: {"create new pixel rate": []},
      genres: ["create new pixel rate"],
      input: '',
    }
  })
  function highscoresToList(result) {
    if (result == undefined) result = {};
    var fromFormat = JSON.parse(JSON.stringify(result));
    var format = {};
    if(mode == "normal") format["create own pixel rate"] = [];
    var list = [];
    try {
    for (var i = 0; i < Object.keys(fromFormat).length; i++) {
      if ((Object.keys(fromFormat)[i] != "create own pixel rate") && (JSON.parse(Object.keys(result)[i].toString().split(' x ')[0]) <= window.innerWidth && JSON.parse(Object.keys(result)[i].toString().split(' x ')[1]) <= window.innerHeight)) format[Object.keys(fromFormat)[i]] = Object.keys(fromFormat[Object.keys(fromFormat)[i]]);
      var highscore = {};
      for (var i1 = 0; Object.keys(fromFormat)[i] != "create own pixel rate" && (JSON.parse(Object.keys(result)[i].toString().split(' x ')[0]) <= window.innerWidth && JSON.parse(Object.keys(result)[i].toString().split(' x ')[1]) <= window.innerHeight && Object.keys(result)[i]) && i1 < Object.keys(result[Object.keys(result)[i]]).length; i1++) {
        if (offline) list.push(Object.keys(result)[i] + "-->" + Object.keys(result[Object.keys(result)[i]])[i1]);
        else {
          //var anzahlSpieler = Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores).length;
            highscore = {};
            for (var i2 = 0; highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores && i2 < Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores).length; i2++) {
              for (var i3 = 0; i3 < Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores[Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores)[i2]]).length; i3++) {
                for (var i4 = 0; i4 < Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores[Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores)[i2]][Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores[Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores)[i2]])[i3]]).length; i4++) {
                  var wert = highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores[Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores)[i2]][Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores[Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores)[i2]])[i3]][Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores[Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores)[i2]][Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores[Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores)[i2]])[i3]])[i4]];
                  console.log(wert);
                  if (!highscore.general || wert < highscore.general.number) highscore.general = {number: JSON.parse(JSON.stringify(wert)), name: Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores)[i2]};
                  if ((!highscore.mine || wert < highscore.mine) && Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores)[i2] == name) highscore.mine = wert;
                }
              }
            }
        }
        if (!highscore.general) highscore.general = {};
        if (highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores) var info = " (" + Object.keys(highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].highscores).length + " player finished, " + highscore.general.number + " is the highscore time by " + highscore.general.name + ", your highscore: " + highscore.mine + ")";
        else var info = "";
        if (format[Object.keys(fromFormat)[i]][i1] && highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].name) format[Object.keys(fromFormat)[i]][i1] += " (" +  highscores[mode][Object.keys(result)[i]][Object.keys(result[Object.keys(result)[i]])[i1]].name + ")";
        if (format[Object.keys(fromFormat)[i]]) format[Object.keys(fromFormat)[i]][i1] += info;
      }
      //if (!offline)
    }
    if (offline) {
      console.log(list);
      for (var i = 0; i < list.length; i++) {
        opt = document.createElement("option");
        document.getElementById("Auswahl").options.add(opt);
        //opt.setAttribute("id", Id);
        opt.text = list[i];
      }
      Auswahl.value = "please select";
    }
  } catch (e) {
      console.error(e);
      console.log("ufffffff");
    }
    app._data.db = format;
    app._data.genres = Object.keys(format);
    // app.data.db = format;
    // app.data.genres = Object.keys(format);
  }
  function saveData() {
    if (confirm("WARNUNG: Sie m√ºssen die Website schon jetzt √ºber die Datei ge√∂ffnet haben, mit der sie sp√§ter offline spielen wollen!")) {
      pSaveAutomaticly.style.display = "inline";
      if (!localStorage.getItem("saveAutomaticly")) {
        saveAutomaticly.checked = confirm("Wollen sie, dass die Daten immer hochgeladen werden, wenn sie diese Datei √∂ffnen?");
        localStorage.setItem("saveAutomaticly", saveAutomaticly.checked);
      }
      localStorage.setItem("highscoresCleanTheRoom", JSON.stringify(highscores));
    }
  }
  var offline = false;
  var joyStick;
  function createNewPixelRate(save) {
    getDatabase(true);
    setTimeout(function () {
    x1 = 0;
    y1 = 0;
    settings.style.display = "none";
    if (JSON.parse(anzahlLadestationen.value) > 0 || (mode == "creator" && Object.keys(selected.objects.ladestation).length > 0)) energyBar.style.display = "inline";
    else energyBar.style.display = "none";
    if (JSON.parse(anzahlEntleerer.value) || (mode == "creator" && Object.keys(selected.objects.leererStation).length > 0)) trashBar.style.display = "inline";
    else trashBar.style.display = "none";
    textur.width = JSON.parse(pixelRateWidth.value); // window.innerWidth - 9;
    textur.height = JSON.parse(pixelRateHeight.value); // window.innerHeight - 9;
    console.log(window.innerWidth + " - " + textur.width);
    selected.pixelRate = pixelRateWidth.value + " x " + pixelRateHeight.value;
    if (mode == "normal") selected.gegenstaende = "loecher: " + anzahlLoecher.value + ", Moebel: " + anzahlMoebel.value + ", Teppich: " + anzahlTeppich.value + ", Ladestationen: " + anzahlLadestationen.value + ", Entleerer: " + anzahlEntleerer.value + ", Spielzeug: " + anzahlSpielzeug.value + ", schmuck: " + anzahlSchmuck.value + ", Staub: " + anzahlStaub.value;
    if (mode == "creator") selected.gegenstaende = "loecher: " + Object.keys(selected.objects.vertiefung).length + ", Moebel: " + Object.keys(selected.objects.moebel).length + ", Teppich: " + Object.keys(selected.objects.teppich).length + ", Ladestationen: " + Object.keys(selected.objects.ladestation).length + ", Entleerer: " + Object.keys(selected.objects.leererStation).length + ", Spielzeug: " + Object.keys(selected.objects.spielzeug).length + ", schmuck: " + Object.keys(selected.objects.schmuck).length + ", Staub: " + Object.keys(selected.objects.staub).length;
    if (!highscores[mode]) highscores[mode] = {};
    if (highscores[mode][selected.pixelRate] != undefined && Object.keys(highscores[mode][selected.pixelRate]).includes(selected.gegenstaende)) selected.gegenstaende += "|";
    if (!highscores[mode][selected.pixelRate]) highscores[mode][selected.pixelRate] = {};
    if (mode == "normal") highscores[mode][selected.pixelRate][selected.gegenstaende] = {pixelRate: selected.pixelRate, settings: "Neustart wenn Wand ber√ºhrt: " + brokenCheck.checked + ", bounce von R√§ndern: " + bounceWalls.checked + ", stoppe bei Spielzeug: " + stoppeBeiSpielzeug.checked + ", werde langsamer bei Spielzeug: " + langsamerBeiSpielzeug.checked + ", neu starten, wenn Geschwindigkeit zu gering wird: " + restartWhenSlow.checked + ", oder bleibe stehen und mache danach weiter: " + clearWhenSlow.checked + ", Spielzeug kann auch bei zu wenig Platz aufgesammelt werden: " + spielzeugWenigPlatz.checked + ", Spielzeug frisst keinen Platz im Speicher: " + spielzeugPlatz.checked + ", gegen Steuerungsrichtung: " + oppsositeDirection.checked, settingsConverted: {value: {}, checked: {}}, objects: {vertiefung: [], staub: [], moebel: [], teppich: [], ladestation: [], leererStation: [], spielzeug: [], schmuck: []}};
    else highscores[mode][selected.pixelRate][selected.gegenstaende] = {pixelRate: selected.pixelRate, settings: "Neustart wenn Wand ber√ºhrt: " + brokenCheck.checked + ", bounce von R√§ndern: " + bounceWalls.checked + ", stoppe bei Spielzeug: " + stoppeBeiSpielzeugEdit.checked + ", werde langsamer bei Spielzeug: " + langsamerBeiSpielzeugEdit.checked + ", neu starten, wenn Geschwindigkeit zu gering wird: " + restartWhenSlowEdit.checked + ", oder bleibe stehen und mache danach weiter: " + clearWhenSlowEdit.checked + ", Spielzeug kann auch bei zu wenig Platz aufgesammelt werden: " + spielzeugWenigPlatzEdit.checked + ", Spielzeug frisst keinen Platz im Speicher: " + spielzeugPlatzEdit.checked + ", gegen Steuerungsrichtung: " + oppsositeDirection.checked, settingsConverted: {value: {}, checked: {}}, objects: {vertiefung: [], staub: [], moebel: [], teppich: [], ladestation: [], leererStation: [], spielzeug: [], schmuck: []}};
    var convertList = {value: ["staubsaugerSize", "verlangsamungTeppich", "slowestSpeed", "zeitLangsamer" /*"pixelBisLadenT", "pixelBisLeerenT", "staubAlsLadeBasisT", "StaubAlsLeerBasisT"*/], checked: ["oppsositeDirection",/*"pixelBisLadenCheck", "StaubAlsLadeBasisCheck", "pixelBisLadenCheck", "StaubAlsLeerBasisCheck", "brokenCheck", "bounceWalls", */"bounceWalls", "stoppeBeiSpielzeug", "langsamerBeiSpielzeug", "spielzeugWenigPlatz", "spielzeugPlatz", "clearWhenSlow", "restartWhenSlow"]}
    for (var i = 0; i < Object.keys(convertList).length; i++) {
      for (var i1 = 0; i1 < convertList[Object.keys(convertList)[i]].length; i1++) {
        if (mode == "normal") {
          if (Object.keys(convertList)[i] == "value") highscores[mode][selected.pixelRate][selected.gegenstaende].settingsConverted[Object.keys(convertList)[i]][convertList[Object.keys(convertList)[i]][i1]] = document.getElementById(convertList[Object.keys(convertList)[i]][i1]).value;
          else highscores[mode][selected.pixelRate][selected.gegenstaende].settingsConverted[Object.keys(convertList)[i]][convertList[Object.keys(convertList)[i]][i1]] = document.getElementById(convertList[Object.keys(convertList)[i]][i1]).checked;
        }
        else {
          if (Object.keys(convertList)[i] == "value" && document.getElementById(convertList[Object.keys(convertList)[i]][i1] + "Edit") != undefined) highscores[mode][selected.pixelRate][selected.gegenstaende].settingsConverted[Object.keys(convertList)[i]][convertList[Object.keys(convertList)[i]][i1]] = document.getElementById(convertList[Object.keys(convertList)[i]][i1] + "Edit").value;
          else if (Object.keys(convertList)[i] == "value") highscores[mode][selected.pixelRate][selected.gegenstaende].settingsConverted[Object.keys(convertList)[i]][convertList[Object.keys(convertList)[i]][i1]] = document.getElementById(convertList[Object.keys(convertList)[i]][i1]).value;
          else if (document.getElementById(convertList[Object.keys(convertList)[i]][i1] + "Edit") == undefined) highscores[mode][selected.pixelRate][selected.gegenstaende].settingsConverted[Object.keys(convertList)[i]][convertList[Object.keys(convertList)[i]][i1]] = document.getElementById(convertList[Object.keys(convertList)[i]][i1]).checked;
          else highscores[mode][selected.pixelRate][selected.gegenstaende].settingsConverted[Object.keys(convertList)[i]][convertList[Object.keys(convertList)[i]][i1]] = document.getElementById(convertList[Object.keys(convertList)[i]][i1] + "Edit").checked;
        }
      }
    }
    if (mode == "normal") {
    for (var i = 0; i < JSON.parse(anzahlLoecher.value) /*2*/; i++) { // Vertiefung
      highscores[mode][selected.pixelRate][selected.gegenstaende].objects.vertiefung.push({x: Math.round(Math.random() *(window.innerWidth)), y: Math.round(Math.random() *(window.innerHeight)), width: Math.round(Math.random() *(JSON.parse(maxLochWidth.value) - JSON.parse(minLochWidth.value))) + JSON.parse(minLochWidth.value)/*51*/, height: Math.round(Math.random() *(/*133*/JSON.parse(maxLochHeight.value) - JSON.parse(minLochHeight.value))) + JSON.parse(minLochHeight.value)});
    }
    for (var i = 0; i < JSON.parse(anzahlMoebel.value)/*4*/; i++) { // M√∂bel
      highscores[mode][selected.pixelRate][selected.gegenstaende].objects.moebel.push({x: Math.round(Math.random() *(window.innerWidth)), y: Math.round(Math.random() *(window.innerHeight)), width: Math.round(Math.random() *(/*155*/JSON.parse(maxMoebelWidth.value) - JSON.parse(minMoebelWidth.value))) + /*23*/JSON.parse(minMoebelWidth.value), height: Math.round(Math.random() *(/*155*/JSON.parse(maxMoebelHeight.value) - JSON.parse(minMoebelHeight.value))) + /*23*/JSON.parse(minMoebelHeight.value)});
    }
    for (var i = 0; i < /*1*/JSON.parse(anzahlTeppich.value); i++) { // teppich
      highscores[mode][selected.pixelRate][selected.gegenstaende].objects.teppich.push({x: Math.round(Math.random() *(window.innerWidth)), y: Math.round(Math.random() *(window.innerHeight)), width: Math.round(Math.random() *(/*444*/JSON.parse(maxTeppichWidth.value) - JSON.parse(minTeppichWidth.value))) + JSON.parse(minTeppichWidth.value)/*33*/, height: Math.round(Math.random() *(/*444*/JSON.parse(maxTeppichHeight.value) - JSON.parse(minTeppichHeight.value))) + JSON.parse(minTeppichHeight.value)/*33*/});
    }
    for (var i = 0; i < /*1*/JSON.parse(anzahlLadestationen.value); i++) { // ladestation
      var side = Math.round(Math.random() *(3));
      if (side == 0) highscores[mode][selected.pixelRate][selected.gegenstaende].objects.ladestation.push({x: Math.round(Math.random() *(window.innerWidth - cssToNumber(sphere1.style.width))), y: 0, width: Math.round(Math.random() *(/*50**/JSON.parse(minLaderWidth.value) - JSON.parse(minLaderWidth.value))) + JSON.parse(minLaderWidth.value)/*50*/, height: Math.round(Math.random() *(/*50**/JSON.parse(minLaderHeight.value) - JSON.parse(minLaderHeight.value))) + JSON.parse(minLaderHeight.value)/*33*/});
      else if (side == 1) highscores[mode][selected.pixelRate][selected.gegenstaende].objects.ladestation.push({x: Math.round(Math.random() *(window.innerWidth - cssToNumber(sphere1.style.width))), y: window.innerHeight - cssToNumber(sphere1.style.width), width: Math.round(Math.random() *(/*50**/JSON.parse(minLaderWidth.value) - JSON.parse(minLaderWidth.value))) + JSON.parse(minLaderWidth.value)/*50*/, height: Math.round(Math.random() *(/*50**/JSON.parse(minLaderHeight.value) - JSON.parse(minLaderHeight.value))) + JSON.parse(minLaderHeight.value)/*33*/});
      else if (side == 2) highscores[mode][selected.pixelRate][selected.gegenstaende].objects.ladestation.push({x: 0, y: Math.round(Math.random() *(window.innerHeight - cssToNumber(sphere1.style.width))), width: Math.round(Math.random() *(/*50**/JSON.parse(minLaderWidth.value) - JSON.parse(minLaderWidth.value))) + JSON.parse(minLaderWidth.value)/*50*/, height: Math.round(Math.random() *(/*50**/JSON.parse(minLaderHeight.value) - JSON.parse(minLaderHeight.value))) + JSON.parse(minLaderHeight.value)/*33*/});
      else if (side == 3) highscores[mode][selected.pixelRate][selected.gegenstaende].objects.ladestation.push({x: window.innerWidth - cssToNumber(sphere1.style.width), y: Math.round(Math.random() *(window.innerHeight - cssToNumber(sphere1.style.width))), width: Math.round(Math.random() *(/*50**/JSON.parse(minLaderWidth.value) - JSON.parse(minLaderWidth.value))) + JSON.parse(minLaderWidth.value)/*50*/, height: Math.round(Math.random() *(/*50**/JSON.parse(minLaderHeight.value) - JSON.parse(minLaderHeight.value))) + JSON.parse(minLaderHeight.value)/*33*/});
    }
    for (var i = 0; i < /*1*/JSON.parse(anzahlEntleerer.value); i++) { // leererStation
      var side = Math.round(Math.random() *(3));
      if (side == 0) highscores[mode][selected.pixelRate][selected.gegenstaende].objects.leererStation.push({x: Math.round(Math.random() *(window.innerWidth - cssToNumber(sphere1.style.width))), y: 0, width: Math.round(Math.random() *(/*50**/JSON.parse(minLeererWidth.value) - JSON.parse(minLeererWidth.value))) + JSON.parse(minLeererWidth.value)/*50*/, height: Math.round(Math.random() *(/*50**/JSON.parse(minLeererHeight.value) - JSON.parse(minLeererHeight.value))) + JSON.parse(minLeererHeight.value)/*33*/});
      else if (side == 1) highscores[mode][selected.pixelRate][selected.gegenstaende].objects.leererStation.push({x: Math.round(Math.random() *(window.innerWidth - cssToNumber(sphere1.style.width))), y: window.innerHeight - cssToNumber(sphere1.style.width), width: Math.round(Math.random() *(/*50**/JSON.parse(minLeererWidth.value) - JSON.parse(minLeererWidth.value))) + JSON.parse(minLeererWidth.value)/*50*/, height: Math.round(Math.random() *(/*50**/JSON.parse(minLeererHeight.value) - JSON.parse(minLeererHeight.value))) + JSON.parse(minLeererHeight.value)/*33*/});
      else if (side == 2) highscores[mode][selected.pixelRate][selected.gegenstaende].objects.leererStation.push({x: 0, y: Math.round(Math.random() *(window.innerHeight - cssToNumber(sphere1.style.width))), width: Math.round(Math.random() *(/*50**/JSON.parse(minLeererWidth.value) - JSON.parse(minLeererWidth.value))) + JSON.parse(minLeererWidth.value)/*50*/, height: Math.round(Math.random() *(/*50**/JSON.parse(minLeererHeight.value) - JSON.parse(minLeererHeight.value))) + JSON.parse(minLeererHeight.value)/*33*/});
      else if (side == 3) highscores[mode][selected.pixelRate][selected.gegenstaende].objects.leererStation.push({x: window.innerWidth - cssToNumber(sphere1.style.width), y: Math.round(Math.random() *(window.innerHeight - cssToNumber(sphere1.style.width))), width: Math.round(Math.random() *(/*50**/JSON.parse(minLeererWidth.value) - JSON.parse(minLeererWidth.value))) + JSON.parse(minLeererWidth.value)/*50*/, height: Math.round(Math.random() *(/*50**/JSON.parse(minLeererHeight.value) - JSON.parse(minLeererHeight.value))) + JSON.parse(minLeererHeight.value)/*33*/});
    }
    for (var i = 0; i < /*7*/JSON.parse(anzahlSpielzeug.value); i++) { // hindernisseAufsaugen ("spielzeug")
      highscores[mode][selected.pixelRate][selected.gegenstaende].objects.spielzeug.push({x: Math.round(Math.random() *(window.innerWidth)), y: Math.round(Math.random() *(window.innerHeight)), radius: Math.round(Math.random() *(/*22*/JSON.parse(maxSpielzeugSize.value) - JSON.parse(minSpielzeugSize.value))) + JSON.parse(minSpielzeugSize.value)/*3*/, collected: false});
    }
    for (var i = 0; i < /*7*/JSON.parse(anzahlSchmuck.value); i++) { // hindernisseAufsaugen ("spielzeug")
      highscores[mode][selected.pixelRate][selected.gegenstaende].objects.schmuck.push({x: Math.round(Math.random() *(window.innerWidth)), y: Math.round(Math.random() *(window.innerHeight)), radius: Math.round(Math.random() *(/*22*/JSON.parse(maxSchmuckSize.value) - JSON.parse(minSchmuckSize.value))) + JSON.parse(minSchmuckSize.value)/*3*/, collected: false});
    }
    //setTimeout(function () {
    verfallsdaten = {ladung: 0, f√ºllungLeft: 0};
    for (var i = 0; i < /*27*/JSON.parse(anzahlStaub.value); i++) { // Staub
      var radius = Math.round(Math.random() *(/*22*/JSON.parse(maxSpielzeugSize.value) - JSON.parse(minStaubSize.value))) + JSON.parse(minStaubSize.value)/*3*/;
      if (verfallsdaten.f√ºllungLeft != undefined) verfallsdaten.f√ºllungLeft += radius*2;
      highscores[mode][selected.pixelRate][selected.gegenstaende].objects.staub.push({x: Math.round(Math.random() *(window.innerWidth)) + radius, y: Math.round(Math.random() *(window.innerHeight)) + radius, radius: radius, collected: false});
      i2 = "defined";
      if (highscores[mode][selected.pixelRate][selected.gegenstaende].objects.staub[highscores[mode][selected.pixelRate][selected.gegenstaende].objects.staub.length - 1].x > window.innerWidth - radius || highscores[mode][selected.pixelRate][selected.gegenstaende].objects.staub[highscores[mode][selected.pixelRate][selected.gegenstaende].objects.staub.length - 1].y > window.innerHeight - radius) {
        i--;
        i2 = "skip";
        highscores[mode][selected.pixelRate][selected.gegenstaende].objects.staub.pop();}
      try {
        for (var i1 = 0; i2 != "skip" && i1 != -1 && i1 < Object.keys(highscores[mode][selected.pixelRate][selected.gegenstaende].objects).length; i1++) {
          for (var i2 = 0; i2 != -1 && i2 < highscores[mode][selected.pixelRate][selected.gegenstaende].objects[Object.keys(highscores[mode][selected.pixelRate][selected.gegenstaende].objects)[i1]].length; i2++) {
            // canvas.fillStyle = "red";
            // canvas.fillRect(highscores[mode][selected.pixelRate][selected.gegenstaende].objects.staub[i].x, highscores[mode][selected.pixelRate][selected.gegenstaende].objects.staub[i].y, highscores[mode][selected.pixelRate][selected.gegenstaende].objects.staub[i].radius*2, highscores[mode][selected.pixelRate][selected.gegenstaende].objects.staub[i].radius*2);
            //console.log(Object.keys(highscores[mode][selected.pixelRate][selected.gegenstaende].objects)[i1] != "staub" && Object.keys(highscores[mode][selected.pixelRate][selected.gegenstaende].objects)[i1] != "spielzeug" && isCollide(JSON.parse(JSON.stringify(highscores[mode][selected.pixelRate][selected.gegenstaende].objects[Object.keys(highscores[mode][selected.pixelRate][selected.gegenstaende].objects)[i1]][i2])), JSON.parse(JSON.stringify(highscores[mode][selected.pixelRate][selected.gegenstaende].objects.staub[highscores[mode][selected.pixelRate][selected.gegenstaende].objects.staub.length - 1]))));
            if (Object.keys(highscores[mode][selected.pixelRate][selected.gegenstaende].objects)[i1] != "staub" && Object.keys(highscores[mode][selected.pixelRate][selected.gegenstaende].objects)[i1] != "spielzeug" && isCollide(JSON.parse(JSON.stringify(highscores[mode][selected.pixelRate][selected.gegenstaende].objects[Object.keys(highscores[mode][selected.pixelRate][selected.gegenstaende].objects)[i1]][i2])), JSON.parse(JSON.stringify(highscores[mode][selected.pixelRate][selected.gegenstaende].objects.staub[highscores[mode][selected.pixelRate][selected.gegenstaende].objects.staub.length - 1])))) {
              highscores[mode][selected.pixelRate][selected.gegenstaende].objects.staub.pop();
              i--;
              if (verfallsdaten.f√ºllungLeft != undefined) verfallsdaten.f√ºllungLeft -= radius*2;
              i2 = -2;
              i1 = -2;
            }
          }
        }
      } catch (e) {
        console.log("please debug :( " + e);
      }
    }
  }
  // if (mode == "creator") {
  //   for (var i = 0; i < selected.objects.staub.length; i++) {
  //     verfallsdaten.f√ºllungLeft += selected.objects.staub[i].radius*2;
  //   }
  // }
    if (StaubAlsLadeBasisCheck.checked && mode == "normal") verfallsdaten.ladung = verfallsdaten.f√ºllungLeft*JSON.parse(staubAlsLadeBasisT.value)//11;
    else if (StaubAlsLadeBasisCheck.checked && mode == "creator") verfallsdaten.ladung = verfallsdaten.f√ºllungLeft*JSON.parse(staubAlsLadeBasisTEdit.value)//11;
    else if (!StaubAlsLadeBasisCheck.checked && mode == "normal") verfallsdaten.ladung = JSON.parse(pixelBisLadenT.value);
    else if (!StaubAlsLadeBasisCheck.checked) verfallsdaten.ladung = JSON.parse(pixelBisLadenTEdit.value);
    if (mode != "creator") verfallsdaten.f√ºllungLeft /= JSON.parse(StaubAlsLeerBasisT.value);//2;
    else verfallsdaten.f√ºllungLeft /= JSON.parse(StaubAlsLeerBasisTEdit.value);//2;
    if (pixelBisLeerenCheck.checked && mode == "normal") verfallsdaten.f√ºllungLeft = JSON.parse(pixelBisLeerenT.value);
    else if (pixelBisLeerenCheck.checked) verfallsdaten.f√ºllungLeft = JSON.parse(pixelBisLeerenTEdit.value);
    if ((mode == "normal" && !entleererVorhanden.checked && anzahlEntleerer.value == "0") || (mode == "creator" && !entleererVorhandenEdit.checked && selected.objects.leererStation.length == 0)) {
      verfallsdaten.f√ºllungLeft = undefined;
    }
    if ((mode == "normal" && !ladestationVorhanden.checked && anzahlLadestationen.value == "0") || (mode == "creator" && !ladestationVorhandenEdit.checked && selected.objects.ladestation.length == 0)) verfallsdaten.ladung = undefined;
    highscores[mode][selected.pixelRate][selected.gegenstaende].maxVerfallsdaten = JSON.parse(JSON.stringify(verfallsdaten));
  //}, 1000);
    if (mode == "normal") selected.objects = JSON.parse(JSON.stringify(highscores[mode][selected.pixelRate][selected.gegenstaende].objects));
    else highscores[mode][selected.pixelRate][selected.gegenstaende].objects = JSON.parse(JSON.stringify(selected.objects));
    selected.maxVerfallsdaten = highscores[mode][selected.pixelRate][selected.gegenstaende].maxVerfallsdaten;
    resetLevel();
    setTimeout(function () {
      resetLevel("noLeerer");
    }, 100);
    if (!offline && save) dbSetWarteschlange.push({tag: "highscores", data: highscores});
    else if (save && confirm("Wollen sie die pixel rate auf ihrem Ger√§t  speichern, sodass sie wenn sie das n√§chste Mal Internet haben und dieses Dokument √∂ffnen atomatisch hochgeladen wird? Mehr als 1 Mal wird die selbe pixel rate nicht zugelassen! Falls dies trotzdem geschieht, werden die Daten wahrscheinlich √ºberschrieben"))/*TODO*/ {
      var newPixelRates = [];
      if (localStorage.getItem("newPixelRate")) newPixelRates = JSON.parse(localStorage.getItem("newPixelRate"));
      newPixelRates.push({pixelRate: selected.pixelRate, gegenstaende: selected.gegenstaende, data: highscores[mode][selected.pixelRate][selected.gegenstaende]});
      localStorage.setItem("newPixelRate", JSON.stringify(newPixelRates));
    }
    }, 1111);
  }
  var dbSetWarteschlange = [];
  setInterval(function () {
    if (dbSetWarteschlange.length > 0) {
      dbSet("cleanTheRoom", dbSetWarteschlange[0].tag, dbSetWarteschlange[0].data);
      dbSetWarteschlange.shift();
    }
  }, 2222);
  function levelSelected(name) {
    //wegWeiser.style.display = "inline";
    for (var i = 0; i < Object.keys(highscores[mode]).length; i++) {
      if (highscores[mode][Object.keys(highscores[mode])[i]][name] != undefined && Object.keys(highscores[mode])[i] == highscores[mode][Object.keys(highscores[mode])[i]][name].pixelRate) {
        console.log("level " + name + " with pixel rate " + Object.keys(highscores[mode])[i] + " selected!");
        selected = {gegenstaende: name, maxVerfallsdaten: highscores[mode][Object.keys(highscores[mode])[i]][name].maxVerfallsdaten, pixelRate: Object.keys(highscores[mode])[i], objects: highscores[mode][Object.keys(highscores[mode])[i]][name].objects, settings: highscores[mode][Object.keys(highscores[mode])[i]][name].settings, settingsConverted: highscores[mode][Object.keys(highscores[mode])[i]][name].settingsConverted};
        for (var i = 0; i < Object.keys(selected.settingsConverted).length; i++) {
          for (var i1 = 0; i1 < Object.keys(selected.settingsConverted[Object.keys(selected.settingsConverted)[i]]).length; i1++) {
            if (Object.keys(selected.settingsConverted)[i] == "value") document.getElementById(Object.keys(selected.settingsConverted[Object.keys(selected.settingsConverted)[i]])[i1]).value = highscores[mode][selected.pixelRate][selected.gegenstaende].settingsConverted[Object.keys(selected.settingsConverted)[i]][Object.keys(selected.settingsConverted[Object.keys(selected.settingsConverted)[i]])[i1]];
            else document.getElementById(Object.keys(selected.settingsConverted[Object.keys(selected.settingsConverted)[i]])[i1]).checked = highscores[mode][selected.pixelRate][selected.gegenstaende].settingsConverted[Object.keys(selected.settingsConverted)[i]][Object.keys(selected.settingsConverted[Object.keys(selected.settingsConverted)[i]])[i1]];
          }
        }
        /*
        for (var i = 0; i < Object.keys(convertList).length; i++) {
          for (var i1 = 0; i1 < convertList[Object.keys(convertList)[i]].length; i1++) {
            if (Object.keys(convertList)[i] == "value") highscores[mode][selected.pixelRate][selected.gegenstaende].settingsConverted[Object.keys(convertList)[i]][convertList[Object.keys(convertList)[i]][i1]] = document.getElementById(convertList[Object.keys(convertList)[i]][i1]).value;
            else highscores[mode][selected.pixelRate][selected.gegenstaende].settingsConverted[Object.keys(convertList)[i]][convertList[Object.keys(convertList)[i]][i1]] = document.getElementById(convertList[Object.keys(convertList)[i]][i1]).checked;
          }
        }
        */
        alert("Regeln: " + replaceAll(replaceAll(selected.settings, "false", "‚õî"), "true", "‚úÖ"));
        if (ger√§t == "Handy" && confirm("Wollen sie mit Jo-Stick spielen?")) joyStickPlay.checked = true;
        resetLevel();
        i = Object.keys(highscores[mode]).length;
      }
    }
  }
  // function clickListCheck() {
  //   setTimeout(function () {
  //     var items = document.querySelectorAll("#db"),
  //     liIndex;
  //     tab = [];
  //            for(var i = 0; i < items.length; i++){
  //                tab.push(items[i].innerHTML);
  //            }
  //            for(i = 0; i < items.length; i++){
  //                items[i].onclick = function() {
  //                  textur.style.display = "inline";
  //                  x1 = 0;
  //                  y1 = 0;
  //                  window.scroll(9, 9);
  //                  if (ger√§t == "PC"/* || joyStickPlay.checked*/) {alert("please click to set a joy-stick!"); joyStick = "place";}
  //                  if (this.innerText == "create own pixel rate") {
  //
  //                  }
  //                  else selected.pixelRate = this.innerText;
  //                  // "brokenCheck: " + brokenCheck.checked + ", bounceWalls: " + bounceWalls.checked + ", stoppeBeiSpielzeug: " + stoppeBeiSpielzeug.checked + ", langsamerBeiSpielzeug: " + langsamerBeiSpielzeug.checked
  //
  //                }
  //              }
  //   }, 1000);
  // }
  // ball
  var pause = false;
  if (navigator.userAgent.match(/Android/i) ||
    navigator.userAgent.match(/webOS/i) ||
    navigator.userAgent.match(/iPhone/i) ||
    navigator.userAgent.match(/iPad/i) ||
    navigator.userAgent.match(/iPod/i) ||
    navigator.userAgent.match(/BlackBerry/i) ||
    navigator.userAgent.match(/Windows Phone/i)
  ) {
    var ger√§t = "Handy"
    console.log("Handy");
    sensibility.style.display = "none";
  } else {
    var ger√§t = "PC"
    joyStickPlayP.style.display = "none";
    console.log("PC");
  }
  sphere1.style.width = "50px";
  sphere1.style.height = "50px";
  var inOrAgainstDirection = 1;
  var selected = {pixelRate: window.innerWidth + " x " + window.innerHeight};
  var x1 = 300,
    y1 = 177; //window.innerHeight - 150 + 3,
  vx1 = 0, vy1 = 0,
    ax1 = 0, ay1 = 0;
  if (window.DeviceMotionEvent != undefined) {
    window.ondevicemotion = function(e) {
      ax1 = inOrAgainstDirection * event.accelerationIncludingGravity.x * 17;
      ay1 = inOrAgainstDirection * event.accelerationIncludingGravity.y * 17;
    }
  }
  else if (ger√§t == "Handy") {
    alert("Die seite muss als sicher (https am Anfang, im Moment http) aufgerufen werden, damit Bewegungssteuerung erlaubt wird! Sie k√∂nnen jedoch auch wenn die Website nicht sicher ist mit Joy-Stick spielen!");
    joyStickPlay.checked = true;
  }
  setInterval(function() {
    if ((mode != "creator" || Object.keys(beginningPoint).length < 1 || beginningPoint.mouseUp) && !pause) {
    if (oppsositeDirection.checked) inOrAgainstDirection = -1;
    else inOrAgainstDirection = 1;
    if (audio && audio.currentTime >= 2*60 + 31) {
      playCleanerSound(true);
    }
    if (selected.pixelRate) {
    textur.width = selected.pixelRate.toString().split(" x ")[0];
    textur.height = selected.pixelRate.toString().split(" x ")[1];
  }
    canvas.fillStyle = "#FF8000";
    canvas.fillRect(0, 0, textur.width, textur.height);
    // joy-stick:
    var nextCoordinates = {x: 0, y: 0};
    if (joyStickPlay.checked) {
      if (joyStick && joyStick.coordinates) {
        if (!oppsositeDirection.checked) var nextCoordinates = {x: x1 + (mausx - joyStick.coordinates.x)/JSON.parse(sensibility.value), y: y1 + (mausy - joyStick.coordinates.y)/JSON.parse(sensibility.value)};
        else var nextCoordinates = {x: x1 - (mausx - joyStick.coordinates.x)/JSON.parse(sensibility.value), y: y1 - (mausy - joyStick.coordinates.y)/JSON.parse(sensibility.value)};
      }
    }
    else if (ger√§t == "Handy") var nextCoordinates = {x: parseInt(x1 + vx1 / cssToNumber(sphere1.style.width)), y: parseInt(y1 + vy1 / cssToNumber(sphere1.style.height))}
    // scrollingInterac.PC = true;
    // if (!scrollingInterac.user && sphere1.style.y > window.innerWidth + scrollX - 17*2*5) window.scroll(scrollX + 3, scrollY);
    // if (!scrollingInterac.user && sphere1.style.y > window.innerHeight + scrollY - 17*2*5) window.scroll(scrollX, scrollY + 3);
    // if (!scrollingInterac.user && sphere1.style.y - scrollX < (17*2 + sphere1.style.width*5) && scrollX > 2) window.scroll(scrollX - 3, scrollY);
    // if (!scrollingInterac.user && sphere1.style.y - scrollY < (17*2 + sphere1.style.height*5) && scrollY > 2) window.scroll(scrollX, scrollY - 3);
    // setTimeout(function () {
    //   scrollingInterac.PC = false;
    // }, 1);
    var landscapeOrientation = window.innerWidth / window.innerHeight > 1;
    if (landscapeOrientation) {
      vx1 = vx1 + ay1;
      vy1 = vy1 + ax1;
    } else {
      vy1 = vy1 - ay1;
      vx1 = vx1 + ax1;
    }
    vx1 = vx1 * 0.98;
    vy1 = vy1 * 0.98;
    var noMoebelInFront = true;
    for (var i = 0; selected.objects && selected.objects.moebel && i < selected.objects.moebel.length; i++) {
      var ball = {x: nextCoordinates.x, y: nextCoordinates.y, width: cssToNumber(sphere1.style.width), height: cssToNumber(sphere1.style.width)};
      if (isCollide(ball, selected.objects.moebel[i])) {
        noMoebelInFront = false;
      }
    }
    if (stopSpielzeug.boolean) {
      noMoebelInFront = false;
      stopSpielzeug.time -= 20;
      if (stopSpielzeug.time < 1) {
        stopSpielzeug.boolean = false;
        if (stopSpielzeug.clearing) slowDownSpielzeug = {boolean: false, time: "endless"};
      }
    }
    if (slowDownSpielzeug.boolean) {
    for (var i = 0; i < slowDownSpielzeug.time.length; i++) {
      if (slowDownSpielzeug.time[i] != "endless") {
        slowDownSpielzeug.time[i] -= 20;
        if (slowDownSpielzeug.time[i] < 1) {
          slowDownSpielzeug.speed += 0.1;//slowDownSpielzeug.boolean = false;
          slowDownSpielzeug.time.splice(i, 1);
          console.log("regain speed! speed now is " + slowDownSpielzeug.speed);
        }
      }
      if (slowDownSpielzeug.speed > 1.9) {
        slowDownSpielzeug.boolean = false;
        console.log("original speed reached");

      }
    }
  }
    if (noMoebelInFront && inRound) {
      if (y1 > nextCoordinates.y) {direction.y = -1; speed.y = y1 - nextCoordinates.y}
      else {direction.y = 1; speed.y = nextCoordinates.y - y1};
      if (x1 > nextCoordinates.x) {direction.x = -1; speed.x = x1 - nextCoordinates.x;}
      else {direction.x = 1; speed.x = nextCoordinates.x - x1;}
      if (speed.x > speed.y) {speed.highest = {number: speed.x, direction: "x"};}
      else speed.highest = {number: speed.y, direction: "y"};
      y1 = nextCoordinates.y;
      x1 = nextCoordinates.x;//parseInt(x1 + vx1 / cssToNumber(sphere1.style.width));
      // if (joyStick && joyStick.coordinates) {
      //   x1 += (mausx - joyStick.coordinates.x)/JSON.parse(sensibility.value); //25;
      //   y1 += (mausy - joyStick.coordinates.y)/JSON.parse(sensibility.value); //25;
      // }
      verfallsdaten.ladung -= speed.x + speed.y;
    }
    if (slowDownSpielzeug.boolean && !stopSpielzeug.boolean) slowDown(slowDownSpielzeug.speed);
    boundingBoxCheck();
    sphere1.style.top = y1 + "px";
    sphere1.style.left = x1 + "px";
    for (var i = 0; selected.objects && selected.objects.teppich && i < selected.objects.teppich.length; i++) {
      canvas.fillStyle = "green";
      canvas.fillRect(selected.objects.teppich[i].x, selected.objects.teppich[i].y, selected.objects.teppich[i].width, selected.objects.teppich[i].height);
      canvas.fillStyle = "#2EFE2E";
      canvas.fillRect(selected.objects.teppich[i].x + 11, selected.objects.teppich[i].y + 11, selected.objects.teppich[i].width - 22, selected.objects.teppich[i].height - 22);
      checkMark(selected.objects.teppich[i], "rectangle");
      speed.slowDownFinished = false;
      var teppichRamen = {x: selected.objects.teppich[i].x, y: selected.objects.teppich[i].y, width: selected.objects.teppich[i].width, height: 11}
      var ball = {x: x1, y: y1, width: cssToNumber(sphere1.style.width), height: cssToNumber(sphere1.style.width)};
      if (mode != "creator" && isCollide(teppichRamen, ball) && !speed.slowDownFinished) slowDown(JSON.parse(verlangsamungTeppich.value)/10);
      var teppichRamen = {x: selected.objects.teppich[i].x, y: selected.objects.teppich[i].y, height: selected.objects.teppich[i].height, width: 11}
      if (mode != "creator" && isCollide(teppichRamen, ball) && !speed.slowDownFinished) slowDown(JSON.parse(verlangsamungTeppich.value)/10);
      var teppichRamen = {x: selected.objects.teppich[i].x + selected.objects.teppich[i].width - 11, y: selected.objects.teppich[i].y, height: selected.objects.teppich[i].height, width: 11}
      if (mode != "creator" && isCollide(teppichRamen, ball) && !speed.slowDownFinished) slowDown(JSON.parse(verlangsamungTeppich.value)/10);
      var teppichRamen = {x: selected.objects.teppich[i].x, y: selected.objects.teppich[i].y + selected.objects.teppich[i].height - 11, height: 11, width: selected.objects.teppich[i].width}
      if (mode != "creator" && isCollide(teppichRamen, ball) && !speed.slowDownFinished) slowDown(JSON.parse(verlangsamungTeppich.value)/10);
    }
    if (verfallsdaten.ladung < 1 && JSON.parse(anzahlLadestationen.value) > 0 && mode != "creator") {
      inRound = false;
      try {
        shutDownAudio.pause();
        audio.pause();
      } catch (e) {}
      verfallsdaten.ladung = selected.maxVerfallsdaten.ladung;
      try {
        var shutDownAudio = new Audio("https://adi.nicolaiweitkemper.de/Sounds/cleanTheRoom/vacuum-cleaner-sound-effect-youtubemp3free.org.mp3");
        shutDownAudio.currentTime = 2*60 + 33;
        shutDownAudio.play();
      } catch (e) {console.log("audio not playable!")}
      setTimeout(function () {
        if (mode != "creator") resetLevel("Akku leer!!!");
      }, 4000);
     }
    for (var i = 0; selected.objects && selected.objects.moebel && i < selected.objects.moebel.length; i++) {
      try {
        if (!useImage.checked) var oneColor = ja;
        var Bild = new Image();
        Bild.src = "https://adi.nicolaiweitkemper.de/Bilder/cleanTheRoom/moebel.png";
        canvas.drawImage(Bild, selected.objects.moebel[i].x, selected.objects.moebel[i].y, selected.objects.moebel[i].width, selected.objects.moebel[i].height);
      } catch (e) {
        canvas.fillStyle = "#FACC2E";
        canvas.fillRect(selected.objects.moebel[i].x, selected.objects.moebel[i].y, selected.objects.moebel[i].width, selected.objects.moebel[i].height);
      }
      checkMark(selected.objects.moebel[i], "rectangle");
      // if (!((x1 >= selected.objects.moebel[i].x && x1 < selected.objects.moebel[i].x + selected.objects.moebel[i].width) || (y1 >= selected.objects.moebel[i].y && y1 < selected.objects.moebel[i].y + selected.objects.moebel[i].height) || (x1 <= selected.objects.moebel[i].x + selected.objects.moebel[i].width && x1 > selected.objects.moebel[i].x) || (x1 <= selected.objects.moebel[i].x + selected.objects.moebel[i].width && x1 > selected.objects.moebel[i].x)))
      // if (y1 >= selected.objects.moebel[i].y && y1 < selected.objects.moebel[i].y + selected.objects.moebel[i].height)
      // if (x1 <= selected.objects.moebel[i].x + selected.objects.moebel[i].width && x1 > selected.objects.moebel[i].x)
      // if (x1 <= selected.objects.moebel[i].x + selected.objects.moebel[i].width && x1 > selected.objects.moebel[i].x)
    }
    for (var i = 0; selected.objects && selected.objects.vertiefung && i < selected.objects.vertiefung.length; i++) {
      try {
        if (!useImage.checked) var oneColor = ja;
        var Bild = new Image();
        Bild.src = "https://adi.nicolaiweitkemper.de/Bilder/cleanTheRoom/vertiefung.png";
        canvas.drawImage(Bild, selected.objects.vertiefung[i].x, selected.objects.vertiefung[i].y, selected.objects.vertiefung[i].width, selected.objects.vertiefung[i].height);

      } catch (e) {
        canvas.fillStyle = "black";
        canvas.fillRect(selected.objects.vertiefung[i].x, selected.objects.vertiefung[i].y, selected.objects.vertiefung[i].width, selected.objects.vertiefung[i].height);
      }
      checkMark(selected.objects.vertiefung[i], "rectangle");
      var ball = {x: x1, y: y1, width: 5, height: 5};
      // if (speed.highest.direction == "x") ball.x = ball.x + (ball.width) - (ball.width/2)*direction.x;
      // else ball.y = ball.y + (ball.height/2) - (ball.height)*direction.y;
      // canvas.fillStyle = "blue";
      // canvas.fillRect(ball.x, ball.y, 22, 22);
      if (speed.highest.direction == "x") ball.x += cssToNumber(sphere1.style.width)/2//2*(-direction.x)
      else ball.y += cssToNumber(sphere1.style.width)/2//ball.height/2*(-direction.y) + ball.height*2;
      // canvas.fillStyle = "red";
      // canvas.fillRect(ball.x, ball.y, ball.width, 100);
      if (isCollide(ball, selected.objects.vertiefung[i]) && mode != "creator") {
        resetLevel("ab ins Loch!!!");
      }
      // if (x1 > selected.objects.vertiefung[i].x + selected.objects.vertiefung[i].width/2 && x1 < selected.objects.vertiefung[i].x + selected.objects.vertiefung[i].width && y1 > selected.objects.vertiefung[i].y && y1 < selected.objects.vertiefung[i].y + selected.objects.vertiefung[i].height) {
      //   console.log("going down from left");
      // }
      // if (x1 < selected.objects.vertiefung[i].x + selected.objects.vertiefung[i].width/2 && x1 > selected.objects.vertiefung[i].x && y1 > selected.objects.vertiefung[i].y && y1 < selected.objects.vertiefung[i].y + selected.objects.vertiefung[i].height) {
      //   console.log("going down from right");
      // }
      // if (y1 > selected.objects.vertiefung[i].y + selected.objects.vertiefung[i].height/2 && y1 < selected.objects.vertiefung[i].y + selected.objects.vertiefung[i].height && x1 > selected.objects.vertiefung[i].x && x1 < selected.objects.vertiefung[i].x + selected.objects.vertiefung[i].width) {
      //   console.log("going down from up");
      // }
      // if (y1 < selected.objects.vertiefung[i].y + selected.objects.vertiefung[i].height/2 && y1 > selected.objects.vertiefung[i].y && x1 > selected.objects.vertiefung[i].x && x1 < selected.objects.vertiefung[i].x + selected.objects.vertiefung[i].width) {
      //   console.log("going down from down");
      // }
    }
    var allStaubCollected = true;
    var ball = {x: x1, y: y1, width: cssToNumber(sphere1.style.width), height: cssToNumber(sphere1.style.width)};
    if (!selected.objects) allStaubCollected = false;
    for (var i = 0; selected.objects && selected.objects.ladestation && i < selected.objects.ladestation.length; i++) {
      canvas.fillStyle = "green";//"#2EFE2E";
      canvas.fillRect(selected.objects.ladestation[i].x, selected.objects.ladestation[i].y, selected.objects.ladestation[i].width, selected.objects.ladestation[i].height);
      checkMark(selected.objects.ladestation[i], "rectangle");
      if (showWayLadestation.checked || (verfallsdaten.ladung < window.innerWidth + window.innerHeight/5 && showWayLaderWhenLow.checked)) {
        canvas.strokeStyle = "green";
        canvas.beginPath();
        canvas.moveTo(selected.objects.ladestation[i].x, selected.objects.ladestation[i].y);
        canvas.lineTo(x1, y1);
        canvas.stroke();
        canvas.closePath();
      }
      if (mode != "creator" && isCollide(ball, selected.objects.ladestation[i]) && verfallsdaten.ladung < selected.maxVerfallsdaten.ladung/*177*/) verfallsdaten.ladung += 17;
    }
    for (var i = 0; selected.objects && selected.objects.leererStation && i < selected.objects.leererStation.length; i++) {
      canvas.fillStyle = "#A4A4A4";
      canvas.fillRect(selected.objects.leererStation[i].x, selected.objects.leererStation[i].y, selected.objects.leererStation[i].width, selected.objects.leererStation[i].height);
      checkMark(selected.objects.leererStation[i], "rectangle");
      if (showWayEntleerer.checked || (verfallsdaten.f√ºllungLeft < 222 && showWayEntleererWhenLow.checked)) {
        canvas.strokeStyle = "#A4A4A4";
        canvas.lineWidth = 4;
        canvas.beginPath();
        canvas.moveTo(selected.objects.leererStation[i].x, selected.objects.leererStation[i].y);
        canvas.lineTo(x1, y1);
        canvas.stroke();
        canvas.closePath();
      }
      if (mode != "creator" && isCollide(ball, selected.objects.leererStation[i]) && verfallsdaten.f√ºllungLeft < /*133*/selected.maxVerfallsdaten.f√ºllungLeft) verfallsdaten.f√ºllungLeft += 3;
    }
    var allStaubPixel = 0;
    for (var i = 0; selected.objects && selected.objects.staub && i < selected.objects.staub.length; i++) {
      // collect staub
      allStaubPixel += selected.objects.staub[i].radius*2;
      if (mode != "creator" && (verfallsdaten.f√ºllungLeft >= selected.objects.staub[i].radius*2 || !verfallsdaten.f√ºllungLeft) && !selected.objects.staub[i].collected && selected.objects.staub[i].x > x1 + 8 && selected.objects.staub[i].x + selected.objects.staub[i].radius < x1 + 8 + cssToNumber(sphere1.style.width) && selected.objects.staub[i].y > y1 + 8 && selected.objects.staub[i].y + selected.objects.staub[i].radius < y1 + 8 + cssToNumber(sphere1.style.width)) {
        selected.objects.staub[i].collected = true;
        if (verfallsdaten.f√ºllungLeft != undefined) {
          verfallsdaten.f√ºllungLeft -= selected.objects.staub[i].radius*2;
        }
        if (verfallsdaten.f√ºllungLeft < 1 && JSON.parse(anzahlEntleerer.value) > 0) {console.log("Sauger voll! Keinen neuen Staub mehr aufnehmen!!!");}
        try {
          audio = new Audio("https://adi.nicolaiweitkemper.de/Sounds/cleanTheRoom/knistern-crackle-rascheln-rustle-gerusche-noise-audio-klnge-hd-soundeffekte-youtubemp3free.mp3");
          audio.volume = 1;
          //audio.currentTime = 1;
          audio.play();
        } catch (e) {console.log("audio not playable!")}
        // setTimeout(function () {
        //   audio.pause();
        // }, 777);
      }
      canvas.fillStyle = "#A4A4A4";
      canvas.globalAlpha = 1;
      if (!(verfallsdaten.f√ºllungLeft >= selected.objects.staub[i].radius*2) && verfallsdaten.f√ºllungLeft != undefined) canvas.globalAlpha = 0.5;
      canvas.beginPath();
      canvas.arc(selected.objects.staub[i].x, selected.objects.staub[i].y, selected.objects.staub[i].radius, 0, Math.PI*2, false);
      if (!selected.objects.staub[i].collected) {
        canvas.fill();
        allStaubCollected = false;
      }
      checkMark(selected.objects.staub[i], "cycle")
    }
    if (mode == "creator" && StaubAlsLeerBasisCheckEdit.checked) verfallsdaten.f√ºllungLeft = JSON.parse(JSON.stringify(allStaubPixel/JSON.parse(StaubAlsLeerBasisTEdit.value)));//2;
    if (allStaubCollected == true && (syncFinished == true || syncFinished == "beginning") && mode != "creator") {
      console.log("finished!!!");
      if (syncFinished != true) {syncFinished = "inProgress";getDatabase(true);}
      // else {
      //   if (syncFinished == "beginning") syncFinished = false;
      //   setTimeout(function () {
      //     syncFinished = false;
      //   }, 1);
      // }
      if (syncFinished == true && mode != "testLevel") {
        if (!highscores[mode][selected.pixelRate][selected.gegenstaende].highscores) highscores[mode][selected.pixelRate][selected.gegenstaende].highscores = {};
        if (!highscores[mode][selected.pixelRate][selected.gegenstaende].highscores[name]) highscores[mode][selected.pixelRate][selected.gegenstaende].highscores[name] = {};
        if (!highscores[mode][selected.pixelRate][selected.gegenstaende].highscores[name][ger√§t]) highscores[mode][selected.pixelRate][selected.gegenstaende].highscores[name][ger√§t] = {};
        if (!highscores[mode][selected.pixelRate][selected.gegenstaende].highscores[name][ger√§t][(joyStickPlay.checked + "").replace("true", "joy-stick").replace("false", "no joy-stick")] || mins + ":" + secs + ":" + "0" + tenths < highscores[mode][selected.pixelRate][selected.gegenstaende].highscores[name][ger√§t][joyStickPlay.checked]) {
          highscores[mode][selected.pixelRate][selected.gegenstaende].highscores[name][ger√§t][(joyStickPlay.checked + "").replace("true", "joy-stick").replace("false", "no joy-stick")] = mins + ":" + secs + ":" + "0" + tenths;
          if (!offline) dbSetWarteschlange.push({tag: "highscores", data: highscores});
          else {
            var newHighscores = [];
            if (localStorage.getItem("newHighscores")) newHighscores = JSON.parse(localStorage.getItem("newHighscores"));
            newHighscores.push({pixelRate: selected.pixelRate, gegenstaende: selected.gegenstaende, ger√§t: ger√§t, joyStick: (joyStickPlay.checked + "").replace("true", "joy-stick").replace("false", "no joy-stick"), data: mins + ":" + secs + ":" + "0" + tenths});
            localStorage.setItem("newHighscores", JSON.stringify(newHighscores));
          }
          alert("So schnell haben sie noch nie gesaugt!!!");
        }
        if (confirm("Wollen sie sich die Leistungen der anderen Spieler ansehen?")) {
          var highscoresShow = JSON.parse(JSON.stringify(highscores[mode][selected.pixelRate][selected.gegenstaende].highscores));
          for (var i = 0; i < Object.keys(highscoresShow).length; i++) {
            if (!highscoresShow[Object.keys(highscoresShow)[i]].Handy) highscoresShow[Object.keys(highscoresShow)[i]].Handy = {};
            highscoresShow[Object.keys(highscoresShow)[i]] = {"PC with joy-stick": highscoresShow[Object.keys(highscoresShow)[i]].PC["joy-stick"], "Handy with joy-stick": highscoresShow[Object.keys(highscoresShow)[i]].Handy["joy-stick"], "Handy without joy-stick": highscoresShow[Object.keys(highscoresShow)[i]].Handy["no joy-stick"]};
          }
          showScores(highscoresShow);
        }
        syncFinished = false;
      }
      else if (mode == "testLevel" && confirm("Sie haben allen Staub aufgesammelt! Dies ist die Gelegenheit, das Level hoch zu laden, da sie es daf√ºr abschlie√üen m√ºssen! Also, wollen sie es hochladen?")) {
        if (confirm("Wollen sie ihr Level benennen?")) highscores.creator[selected.pixelRate][Object.keys(highscores.creator[selected.pixelRate])[0]].name = prompt("Wie wollen sie ihr level nennen?");
        if (!highscores.uploaded) highscores.uploaded = {};
        if (!highscores.uploaded[selected.pixelRate]) highscores.uploaded[selected.pixelRate] = {};
        for (var i = 0; highscores.uploaded[selected.pixelRate][Object.keys(highscores.creator[selected.pixelRate])[0]] != undefined; i++) {
          Object.keys(highscores.creator[selected.pixelRate])[0] += "|";
        }
        highscores.uploaded[selected.pixelRate][Object.keys(highscores.creator[selected.pixelRate])[0]] = JSON.parse(JSON.stringify(highscores.creator[selected.pixelRate][Object.keys(highscores.creator[selected.pixelRate])[0]]));
        highscores.uploaded[selected.pixelRate][Object.keys(highscores.creator[selected.pixelRate])[0]].highscores = {};
        highscores.uploaded[selected.pixelRate][Object.keys(highscores.creator[selected.pixelRate])[0]].highscores[name] = {};
        highscores.uploaded[selected.pixelRate][Object.keys(highscores.creator[selected.pixelRate])[0]].highscores[name][ger√§t] = {};
        highscores.uploaded[selected.pixelRate][Object.keys(highscores.creator[selected.pixelRate])[0]].highscores[name][ger√§t][(joyStickPlay.checked + "").replace("true", "joy-stick").replace("false", "no joy-stick")] = mins + ":" + secs + ":" + "0" + tenths;
      }
      if (mode == "testLevel" && syncFinished == true) {
        resetAfterTrying(true);
      }
    }
    canvas.globalAlpha = 1;
    for (var i = 0; selected.objects && selected.objects.spielzeug && i < selected.objects.spielzeug.length; i++) {
      // collect spielzeug
      if (mode != "creator" && !selected.objects.spielzeug[i].collected && ((!spielzeugWenigPlatz.checked && verfallsdaten.f√ºllungLeft > selected.objects.spielzeug[i].radius*2) || spielzeugWenigPlatz.checked) && selected.objects.spielzeug[i].x > x1 + 8 && selected.objects.spielzeug[i].x + selected.objects.spielzeug[i].radius < x1 + 8 + cssToNumber(sphere1.style.width) && selected.objects.spielzeug[i].y > y1 + 8 && selected.objects.spielzeug[i].y + selected.objects.spielzeug[i].radius < y1 + 8 + cssToNumber(sphere1.style.width)) {
        selected.objects.spielzeug[i].collected = true;
        if (verfallsdaten.f√ºllungLeft > selected.objects.spielzeug[i].radius*2 && !spielzeugPlatz.checked && verfallsdaten.f√ºllungLeft != undefined) verfallsdaten.f√ºllungLeft -= selected.objects.spielzeug[i].radius*2;
        if (stoppeBeiSpielzeug.checked) stopSpielzeug = {boolean: true, time: 2000};
        if (langsamerBeiSpielzeug.checked && !slowDownSpielzeug.boolean) slowDownSpielzeug = {boolean: true, time: [/*JSON.parse(*/zeitLangsamer.value/*)*/], speed: 1.9};
        else if (langsamerBeiSpielzeug.checked && ((mode != "creator" && slowDownSpielzeug.speed - 0.1 >= JSON.parse(slowestSpeed.value))/* || (mode == "creator" && slowDownSpielzeug.speed - 0.1 >= JSON.parse(slowestSpeedEdit.value))*/)) {slowDownSpielzeug.speed -= 0.1; slowDownSpielzeug.time.push(/*JSON.parse(*/zeitLangsamer.value/*)*/);}
        if (langsamerBeiSpielzeug.checked && !((mode != "creator" && slowDownSpielzeug.speed - 0.1 >= JSON.parse(slowestSpeed.value))/* || (mode == "creator" && slowDownSpielzeug.speed - 0.1 >= JSON.parse(slowestSpeedEdit.value))*/)) {
          if (restartWhenSlow.checked) resetLevel();
          if (clearWhenSlow.checked) stopSpielzeug = {boolean: true, time: 2000, clearing: true};
        }
        /*
        if (slowDownSpielzeug.boolean && ) {slowDown(slowDownSpielzeug.speed - 0.1); slowDownSpielzeug.speed -= 1.1;}
        else if (slowDownSpielzeug.boolean) slowDown(slowDownSpielzeug.speed);
        */
        try {
          var localAudio = new Audio("https://adi.nicolaiweitkemper.de/Sounds/cleanTheRoom/seth-hoovers-up-his-lego-youtubemp3free.org.mp3");
          localAudio.currentTime = 48;
          localAudio.play();
          setTimeout(function () {
            localAudio.pause();
          }, 500);
        } catch (e) {console.log("audio not playable!")}
        // verfallsdaten.f√ºllungLeft -= selected.objects.spielzeug[i].radius*2;
        // if (verfallsdaten.f√ºllungLeft < 1) console.log("Sauger voll! Keinen neuen spielzeug mehr aufnehmen!!!");
      }
      if (!selected.objects.spielzeug[i].collected) {
        try {
        if (!useImage.checked) var oneColor = ja;
          var Bild = new Image();
          Bild.src = "https://adi.nicolaiweitkemper.de/Bilder/cleanTheRoom/spielzeug.png";
          canvas.drawImage(Bild, selected.objects.spielzeug[i].x - selected.objects.spielzeug[i].radius, selected.objects.spielzeug[i].y - selected.objects.spielzeug[i].radius, selected.objects.spielzeug[i].radius*2, selected.objects.spielzeug[i].radius*2);

        } catch (e) {
          canvas.fillStyle = "red";
          canvas.beginPath();
          canvas.arc(selected.objects.spielzeug[i].x, selected.objects.spielzeug[i].y, selected.objects.spielzeug[i].radius, 0, Math.PI*2, false);
          canvas.fill();
        }
      }
      checkMark(selected.objects.spielzeug[i], "cycle");
    }
    for (var i = 0; selected.objects && selected.objects.schmuck && i < selected.objects.schmuck.length; i++) {
      // collect Schmuck
      if (mode != "creator" && !selected.objects.schmuck[i].collected && selected.objects.schmuck[i].x > x1/* + 8*/ && selected.objects.schmuck[i].x + selected.objects.schmuck[i].radius < x1/* + 8*/ + cssToNumber(sphere1.style.width) && selected.objects.schmuck[i].y > y1/* + 8*/ && selected.objects.schmuck[i].y + selected.objects.schmuck[i].radius < y1/* + 8*/ + cssToNumber(sphere1.style.width)) {
        selected.objects.schmuck[i].collected = true;
        try {
          audio = new Audio("https://adi.nicolaiweitkemper.de/Sounds/cleanTheRoom/vacuuming-up-random-stuff-floor-tool-vacuum-cleaner-sound-asmr-youtubemp3free.org.mp3");
          audio.currentTime = 60*1 + 29.5;
          audio.play();
          setTimeout(function () {
            audio.pause();
            audio = new Audio("https://adi.nicolaiweitkemper.de/Sounds/you%20are%20fired!.mp3").play();
            resetLevel(/*"Schmuck eingesammelt!"*/);
          }, 500);
        } catch (e) {
          setTimeout(function () {
          resetLevel();
        }, 500);
        }
      }
      if (!selected.objects.schmuck[i].collected) {
        try {
          if (!useImage.checked) var oneColor = ja;
          var Bild = new Image();
          Bild.src = "https://adi.nicolaiweitkemper.de/Bilder/cleanTheRoom/schmuck.png";
          canvas.drawImage(Bild, selected.objects.schmuck[i].x - selected.objects.schmuck[i].radius, selected.objects.schmuck[i].y - selected.objects.schmuck[i].radius, selected.objects.schmuck[i].radius*2, selected.objects.schmuck[i].radius*2);
        } catch (e) {
          canvas.fillStyle = "yellow";
          canvas.beginPath();
          canvas.arc(selected.objects.schmuck[i].x, selected.objects.schmuck[i].y, selected.objects.schmuck[i].radius, 0, Math.PI*2, false);
          canvas.fill();
        }
        checkMark(selected.objects.schmuck[i], "cycle");
      }
    }
    // sphere1.style.top = "175";
    // sphere1.style.left = "9";
    // energyBar.style.left = "20";
    // energyBar.style.top = "180";
    // trashBar.style.left = "37";
    // trashBar.style.top = "180";
    // setTimeout(function () {
    //   energyBar.style.height = 30;
    //   energyBar.style.top = "190";
    // }, 3333);
    if (selected.maxVerfallsdaten) {
      if (selected.maxVerfallsdaten.f√ºllungLeft > 0/*selected.objects.leererStation.length > 0*/) {
        trashBar.style.width = 11 + (cssToNumber(sphere1.style.width) - 50)/2;
        trashBar.style.height = 40 + (cssToNumber(sphere1.style.height) - 50);
        trashBar.style.height = cssToNumber(trashBar.style.height)*(verfallsdaten.f√ºllungLeft/ selected.maxVerfallsdaten.f√ºllungLeft/*133*/);
        trashBar.style.left = cssToNumber(sphere1.style.left) + 19 + cssToNumber(trashBar.style.width)//cssToNumber(sphere1.style.width) - 50;
        trashBar.style.top = cssToNumber(sphere1.style.top) + 5 + (40 - cssToNumber(trashBar.style.height)) + cssToNumber(sphere1.style.height) - 50;
      }
      // else {
      //   trashBar.style.width = 0;
      //   verfallsdaten.f√ºllungLeft += cssToNumber(sphere1.style.width);
      // }
      if (selected.maxVerfallsdaten.ladung > 0/*selected.objects.ladestation.length > 0*/) {
        energyBar.style.width = 11 + (cssToNumber(sphere1.style.width) - 50)/2;
        energyBar.style.height = 40 + (cssToNumber(sphere1.style.height) - 50);
        energyBar.style.height = cssToNumber(energyBar.style.height)*(verfallsdaten.ladung/ /*177*/selected.maxVerfallsdaten.ladung);
        energyBar.style.left = cssToNumber(sphere1.style.left) + 11// + cssToNumber(sphere1.style.width) - 50;
        energyBar.style.top = cssToNumber(sphere1.style.top) + 5 + (40 - cssToNumber(energyBar.style.height)) + cssToNumber(sphere1.style.height) - 50;
      }
      // else {
      //   energyBar.style.width = 0;
      //   verfallsdaten.ladung += speed.x + speed.y;
      // }
  }
  if (joyStick && joyStick.coordinates) {
    canvas.fillStyle = "blue";
    canvas.beginPath();
    canvas.arc(joyStick.coordinates.x, joyStick.coordinates.y, 10, 0, Math.PI*2, false);
    canvas.fill();
    canvas.strokeStyle = "green";
    canvas.beginPath();
    canvas.moveTo(joyStick.coordinates.x, joyStick.coordinates.y);
    canvas.lineTo(mausx, mausy);
    canvas.stroke();
    canvas.closePath();
  }
}
  }, 25);
  var audio;
  var cleanerAudioVar;
  var inRound = false;
  function playCleanerSound(repeat) {
    try {
      cleanerAudioVar.pause();
    } catch (e) {}
    try {
      cleanerAudioVar = new Audio("https://adi.nicolaiweitkemper.de/Sounds/cleanTheRoom/low%20pitch-shifted-vacuum-cleaner-without-piep-sound-effect-youtubemp3free.mp3"/*"https://adi.nicolaiweitkemper.de/Sounds/cleanTheRoom/low%20pitch-shifted-vacuum-cleaner-sound-effect-youtubemp3free.mp3"*//*"https://adi.nicolaiweitkemper.de/Sounds/cleanTheRoom/pitch-shifted-vacuum-cleaner-sound-effect-youtubemp3free.org.mp3"*/ /*"https://adi.nicolaiweitkemper.de/Sounds/cleanTheRoom/vacuum-cleaner-sound-effect-youtubemp3free.org.mp3"*/);
      if (clenerFiepAudio.checked) cleanerAudioVar = new Audio("https://adi.nicolaiweitkemper.de/Sounds/cleanTheRoom/low%20pitch-shifted-vacuum-cleaner-little-piep-sound-effect-youtubemp3free.mp3");
      cleanerAudioVar.volume = 0.5;
      cleanerAudioVar.currentTime = 1;
      if (repeat) cleanerAudioVar.currentTime = 2;
      if (cleanerAudio.checked) cleanerAudioVar.play();
    } catch (e) {console.log("audio not playable!")}
  }
  function resetLevel(type) {
    setTimeout(function () {
      window.scroll(9, 9);
    }, 500);
    textur.style.touchAction = 'none';
    time = 0;
    textur.style.display = "inline";
    if ((ger√§t == "PC" && (!joyStick || !joyStick.coordinates)) && type != "noLeerer"/* || joyStickPlay.checked*/) {joyStickPlay.checked = true; alert("please click to set a joy-stick!"); joyStick = "place";}
    if (type) console.log(type);
    inRound = true;
    try {
      audio.pause();
      localAudio.pause();
    } catch (e) {console.log("audio not playable!")}
    if (type != "Akku leer!!!" &&  type != "noLeerer" && type != undefined) {
      try {
        var localAudio = new Audio("https://adi.nicolaiweitkemper.de/Sounds/cleanTheRoom/wall-hit-sound-effects-all-sounds-2-youtubemp3free.org.mp3");
        localAudio.currentTime = 29.5;
        localAudio.play();
        setTimeout(function () {
          localAudio.pause();
        }, 1000);
      } catch (e) {console.log("audio not playable!")}
    }
    playCleanerSound();
    verfallsdaten = {ladung: selected.maxVerfallsdaten.ladung, f√ºllungLeft: /*133*/selected.maxVerfallsdaten.f√ºllungLeft};
    slowDownSpielzeug = {boolean: false, time: "endless"}
    stopSpielzeug = {time: 0, boolean: false};
    setTimeout(function () {
      x1 = 0;
      y1 = 0;
      for (var i = 0; i < selected.objects.staub.length; i++) {
        selected.objects.staub[i].collected = false;
      }
      for (var i = 0; i < selected.objects.spielzeug.length; i++) {
        selected.objects.spielzeug[i].collected = false;
      }
      for (var i = 0; i < selected.objects.schmuck.length; i++) {
        selected.objects.schmuck[i].collected = false;
      }
    }, 1);
  }
  var stopSpielzeug = {time: 0, boolean: false};
  var slowDownSpielzeug = {time: 0, boolean: false};
  var speed = {x: 0, y: 0, highest: 0};
  var direction = {x: 1, y: 1};
  function isCollide(a, b) {
    if (a.radius) {a.height = a.radius*2; a.x -= JSON.parse(JSON.stringify(a.radius)); a.y -= JSON.parse(JSON.stringify(a.radius));}
    if (b.radius) {b.height = b.radius*2; b.x -= JSON.parse(JSON.stringify(b.radius)); b.y -= JSON.parse(JSON.stringify(b.radius));}
    return !(
      ((a.y + a.height) < (b.y)) ||
      (a.y > (b.y + b.height)) ||
      ((a.x + a.width) < b.x) ||
      (a.x > (b.x + b.width))
    );
  }
  function slowDown(pSpeed) {
    console.log("slow down");
    //if (!pSpeed) var pSpeed = "Test";
    y1 -= speed.y/ /*1.1*/ pSpeed*direction.y;
    x1 -= speed.x/ pSpeed/*1.3*/ *direction.x;
    sphere1.style.top = y1 + "px";
    sphere1.style.left = x1 + "px";
    speed.slowDownFinished = true;
    verfallsdaten.ladung += speed.y/1.1 + speed.x/1.3;
  }
  var syncFinished = "beginning";
  function boundingBoxCheck() {
    if (x1 < 0) {
      if (speed.highest.number > 5 && brokenCheck.checked && mode != "creator") {resetLevel("broken");}
      x1 = 0;
      if (bounceWalls.checked) vx1 = -vx1;
    }
    if (y1 < 0) {
      if (speed.highest.number > 5 && brokenCheck.checked && mode != "creator") {resetLevel("broken");}
      y1 = 0;
      if (bounceWalls.checked) vy1 = -vy1;
    }
    if (x1 > selected.pixelRate.toString().split(" x ")[0] - JSON.parse(sphere1.style.width.toString().split('px')[0]) / 2) {
      if (speed.highest.number > 5 && brokenCheck.checked && mode != "creator") {resetLevel("broken");}
      x1 = /*window.innerWidth*/selected.pixelRate.toString().split(" x ")[0] - JSON.parse(sphere1.style.width.toString().split('px')[0]) / 2 - 1;
      if (bounceWalls.checked) vx1 = -vx1;
    }
    if (y1 > selected.pixelRate.toString().split(" x ")[1] - JSON.parse(sphere1.style.height.toString().split('px')[0]) / 2) {
      if (speed.highest.number > 5 && brokenCheck.checked && mode != "creator") {resetLevel("broken");}
      y1 = selected.pixelRate.toString().split(" x ")[1] - JSON.parse(sphere1.style.height.toString().split('px')[0]) / 2;
      if (bounceWalls.checked) vy1 = -vy1;
    }
  }
  var verfallsdaten = {ladung: 177, f√ºllungLeft: 133};
  function cssToNumber(string) {
    return JSON.parse(string.toString().split("px")[0]);
  }
  function canvasClicked() {
    if (joyStick == "place" && ger√§t == "PC") {
      joyStick = {coordinates : {x: mausx, y: mausy}};
    }
  }
  document.addEventListener('touchmove', touch);
  document.addEventListener('touchstart', touch);
  document.addEventListener('touchend', touch);
// }
var firstTouch = {};
var swipeUp;
function touch(ev) {
  // if (!ev.touches[0]) {
  //   console.log(":((()))");
  // }
  if (ev.type == "touchstart") firstTouch = {x: ev.touches[0]["pageX"], y: ev.touches[0]["pageY"]};
    if (/*joyStickPlay.checked && */ev.touches[0] != undefined) {
      mausx = ev.touches[0]["pageX"]// + scrollX;
      mausy = ev.touches[0]["pageY"]// + scrollY;
      if (trash.style.display == "inline") mausy -= 50;
      // swipe direction detection:
      var xDiff = firstTouch.x - mausx;
      var yDiff = firstTouch.y - mausy;
          if (!(Math.abs(xDiff) > Math.abs(yDiff)) && yDiff > 0) {
              /* up swipe */
          swipeUp = true;
          if (mode = "creator") textur.style.touchAction = '';
          console.log("scrolling allowed, because direction down");
          beginningPoint = {};
          }
          else {
            textur.style.touchAction = 'none';
          }
          if (mode == "creator") readMouseMove({clientX: ev.touches[0]["pageX"], clientY: ev.touches[0]["pageY"], scrollIncluded: true});
      }
  if (joyStickPlay.checked && mode != "creator" && ev.type == "touchend") {
    //textur.style.touchAction = '';
    mausx = joyStick.coordinates.x;
    mausy = joyStick.coordinates.y;
  }
  if (ev.type == "touchend" && mausy < textur.height/* && !swipeUp*/) {
    mouseUpOnCanvas();
  }
  if (ev.type == "touchstart" && mausy < textur.height/* && !swipeUp*/) {
    mousedownOnCanvas();
  }
  // if (ev.type == "touchend" && mausy < textur.height && swipeUp) {
  //   beginningPoint = {};
  //   console.log("removeElement");
  // }
  if (ev.type == "touchend") swipeUp = undefined;
    if (joyStickPlay.checked && mode != "creator" && ev.type == "touchstart" && selected.objects) {
      joyStick = {coordinates : {x: mausx, y: mausy}};
    }
    // if (ev.type == "touchmove") {
    //   mousemoveFolgen();
    // }
}
function replaceAll(str, find, replace) {
    return str.replace(new RegExp(find, 'g'), replace);
}
// topp uhr
var time = 0;
// var running = 0;
var mins;
var secs;
var tenths;
increment();

// function startPause() {
// if (running == 0) {
//   running = 1;
//   time = 0;
//   increment();
// }
// else {
//   running = 0;
// }
// }
// function reset() {
// running = 0;
// timer = 0;
// }
function increment() {
// if (running == 1) {
setTimeout(function () {
  time++;
  mins = Math.floor(time/10/60);
  secs = Math.floor(time/10);
      secs -= 60*mins;
  tenths = time % 10;
  if (mins < 10) {
    mins = "0" + mins
  }
  if (secs < 10) {
    secs = "0" + secs;
  }
  increment();
}, 100);
// }
}
var highscoresDisplayedBefore = {};
function showScores(highscores, mode) {
  scores.style.display = "inline";
  for (var i = 0; i < Object.keys(highscoresDisplayedBefore).length + 11 && Object.keys(highscoresDisplayedBefore).length > 0; i++) {
    try {
      document.getElementById("scores").deleteRow(0);
    } catch (e) {
      console.log("wanted to delete too many elements of table");
      i = Object.keys(highscoresDisplayedBefore).length + 11
    }
  }
  highscoresDisplayedBefore = highscores;
  document.getElementById('textur').style.display = "none";
  //console.log("scores: " + highscores);
  var cell = [ /*row.insertCell(0)*/ ];
  var highestLives = {lives: 0, number: 3};
  for (var i = 0; i < Object.keys(highscores).length; i++) {
    // if (!(Object.keys(highscores)[i] == "allMaps")) {
      var table = document.getElementById("scores");
      var row = table.insertRow(i);
      cell.push(row.insertCell(0));
      cell[cell.length - 1].innerHTML = Object.keys(highscores)[i]
    // }
    //  var cell = [/*row.insertCell(0)*/];
    for (var i1 = 1; i1 < Object.keys(highscores[Object.keys(highscores)[i]]).length + 1; i1++) {
      // if (!(Object.keys(highscores)[i] == "allMaps")) {
        if (i1 < Object.keys(highscores[Object.keys(highscores)[i]]).length + 1) {
          cell[cell.length - 2] = row.insertCell(i1);
          // if (level[level.mode].levelType == "worldWideLevel" && i1 == 0) {
          //   i1--;
          // }
          if (highscores[Object.keys(highscores)[i]][Object.keys(highscores[Object.keys(highscores)[i]])[i1 - 1]] != undefined) cell[cell.length - 2].innerHTML = highscores[Object.keys(highscores)[i]][Object.keys(highscores[Object.keys(highscores)[i]])[i1 - 1]];
          else cell[cell.length - 2].innerHTML = "/";
          if (highscores[Object.keys(highscores)[i]][Object.keys(highscores[Object.keys(highscores)[i]])[i1 - 1]] >  highscores[Object.keys(highscores)[i]][Object.keys( highscores[Object.keys(highscores)[i]])[i1/* - 1*/]]) cell[cell.length - 2].style.color = "red";
          else if (highscores[Object.keys(highscores)[i]][Object.keys(highscores[Object.keys(highscores)[i]])[i1 - 1]] <  highscores[Object.keys(highscores)[i]][Object.keys( highscores[Object.keys(highscores)[i]])[i1/* - 1*/]]) cell[cell.length - 2].style.color = "green";
          else if (name == Object.keys(highscores)[i]) cell[cell.length - 2].style.color = "blue";
          else cell[cell.length - 2].style.color = "black";

        } else {
          cell[cell.length - 2] = row.insertCell(i1);
          //  cell[cell.length - 2].innerHTML = "unmade";
          //  cell[cell.length - 2].style.color = "black";
        }
      // }
    }
    var row = table.insertRow(i);
    //  var row = table.insertRow(i+1);
    // var row = table.insertRow(i + 1);
    if (Object.keys(highscores[Object.keys(highscores)[i]]).length > highestLives.lives) highestLives = {number: i, lives: Object.keys(highscores[Object.keys(highscores)[i]]).length}
  }
  //  var row = table.insertRow(0);
  //  var cell = [/*row.insertCell(0)*/];
  // cell.push(row.insertCell(0));
  // cell[cell.length - 1].innerHTML = "name";
  var row = table.insertRow(0);
  cell.push(row.insertCell(0));
  for (var i1 = 0; i1 < highestLives.lives + 1; i1++) {
    cell.push(row.insertCell(i1));
    if (i1 == 0) cell[cell.length - 1].innerHTML = "name";
    else cell[cell.length - 1].innerHTML = Object.keys(highscoresShow[name])[i1 - 1];
  }
}
</script>
